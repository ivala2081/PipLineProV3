import{r as e,j as t,Y as s,Z as a,c as l,o as r,_ as n,X as i,S as d,m as c,e as o,D as x,h as m,$ as u,a0 as h,a1 as g,C as b,x as p,E as w,y,a2 as j,a3 as f,n as N,a4 as v,a5 as _,a6 as k,a7 as S,I as C,R as T,k as D,l as F,a8 as E,a9 as L,t as $,w as R}from"./vendor-react-OTlZW24_.js";import{b as O}from"./contexts-ClDLaFbv.js";import{a as I,U,b as P}from"./components-modern-C3CPxipx.js";import{h as M,i as B,j as H,k as W,L as A,I as z,l as G,m as V,n as q,o as Y,p as J,B as K}from"./components-ui-CpjZxCxu.js";const Q=({isOpen:r,onClose:n,onSuccess:i})=>{O();const[d,c]=e.useState({wallet_address:"",wallet_name:"",network:"ETH"}),[o,x]=e.useState(!1),[m,u]=e.useState({}),[h,g]=e.useState(null),b=()=>{o||(n(),c({wallet_address:"",wallet_name:"",network:"ETH"}),u({}),g(null))};return t.jsx(M,{open:r,onOpenChange:b,children:t.jsxs(B,{className:"sm:max-w-md",children:[t.jsx(H,{children:t.jsxs(W,{className:"flex items-center gap-2",children:[t.jsx(s,{className:"h-5 w-5 text-blue-600"}),"Add New Wallet"]})}),t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return d.wallet_name.trim()||(e.wallet_name="Wallet name is required"),d.wallet_address.trim()?"ETH"===d.network||"BSC"===d.network?d.wallet_address.startsWith("0x")&&42===d.wallet_address.length||(e.wallet_address="Invalid Ethereum/BSC address format"):"TRC"===d.network&&(d.wallet_address.startsWith("T")&&34===d.wallet_address.length||(e.wallet_address="Invalid TRON address format")):e.wallet_address="Wallet address is required",u(e),0===Object.keys(e).length})()){x(!0),g(null);try{const e=await I.post("/trust-wallet/wallets",d),t=await I.parseResponse(e);if(t.success){const e=t.wallet?.id;i(e),n(),c({wallet_address:"",wallet_name:"",network:"ETH"}),u({})}else g(t.error||"Failed to create wallet")}catch(t){t instanceof Error?t.message.includes("409")||t.message.includes("already exists")?(g("This wallet address is already registered. Please use a different address."),c(e=>({...e,wallet_address:""}))):t.message.includes("400")||t.message.includes("Invalid")?g("Invalid wallet address format. Please check the address and try again."):t.message.includes("Network error")||t.message.includes("fetch")?g("Network error. Please check your connection and try again."):t.message.includes("500")?g("Server error. Please try again later."):g(t.message||"Failed to create wallet. Please try again."):g("Network error. Please try again.")}finally{x(!1)}}},className:"space-y-4",children:[h&&t.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-md",children:[t.jsx(a,{className:"h-4 w-4 text-red-500 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"text-sm text-red-700",children:[t.jsx("p",{children:h}),h.includes("already registered")&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:"ðŸ’¡ Tip: Check if you've already added this wallet or try a different address."})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(A,{htmlFor:"wallet_name",children:"Wallet Name"}),t.jsx(z,{id:"wallet_name",value:d.wallet_name,onChange:e=>c({...d,wallet_name:e.target.value}),placeholder:"e.g., Main Company Wallet",className:m.wallet_name?"border-red-300":""}),m.wallet_name&&t.jsx("p",{className:"text-sm text-red-600",children:m.wallet_name})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(A,{htmlFor:"network",children:"Network"}),t.jsxs(G,{value:d.network,onValueChange:e=>c({...d,network:e}),children:[t.jsx(V,{children:t.jsx(q,{placeholder:"Select network"})}),t.jsxs(Y,{children:[t.jsx(J,{value:"ETH",children:"Ethereum (ETH)"}),t.jsx(J,{value:"BSC",children:"Binance Smart Chain (BSC)"}),t.jsx(J,{value:"TRC",children:"TRON (TRC)"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(A,{htmlFor:"wallet_address",children:"Wallet Address"}),t.jsx(z,{id:"wallet_address",value:d.wallet_address,onChange:e=>c({...d,wallet_address:e.target.value}),placeholder:(()=>{switch(d.network){case"ETH":return"0x742d35Cc6634C0532925a3b8D4C9db96C4b4d8b7";case"BSC":return"0x8ba1f109551bD432803012645Hac136c13";case"TRC":return"TQn9Y2khEsLJW1ChVWFMSMeRDow5KcbLSE";default:return"Enter wallet address"}})(),className:m.wallet_address?"border-red-300":""}),m.wallet_address&&t.jsx("p",{className:"text-sm text-red-600",children:m.wallet_address}),t.jsx("p",{className:"text-xs text-gray-500",children:"ETH"===d.network||"BSC"===d.network?"Must start with 0x and be 42 characters long":"Must start with T and be 34 characters long"})]}),t.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[t.jsx(K,{type:"button",variant:"outline",onClick:b,disabled:o,children:"Cancel"}),t.jsx(K,{type:"submit",disabled:o,className:"bg-blue-600 hover:bg-blue-700",children:o?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(l,{className:"h-4 w-4 mr-2"}),"Create Wallet"]})})]})]})]})})},X=()=>{const{t:l}=O(),[M,B]=e.useState([]),[H,W]=e.useState(null),[A,z]=e.useState([]),[G,V]=e.useState(!0),[q,Y]=e.useState(!1),[J,K]=e.useState(!1),[X,Z]=e.useState(new Set),[ee,te]=e.useState(new Set),[se,ae]=e.useState(!1),[le,re]=e.useState(!1),[ne,ie]=e.useState(!1),[de,ce]=e.useState(!1),[oe,xe]=e.useState(null),[me,ue]=e.useState(null),[he,ge]=e.useState(null),[be,pe]=e.useState(""),[we,ye]=e.useState([]),[je,fe]=e.useState(!1),[Ne,ve]=e.useState({}),[_e,ke]=e.useState({}),[Se,Ce]=e.useState(null),[Te,De]=e.useState(""),[Fe,Ee]=e.useState("all"),[Le,$e]=e.useState(null),[Re,Oe]=e.useState(""),[Ie,Ue]=e.useState("all"),[Pe,Me]=e.useState("all"),[Be,He]=e.useState("all"),[We,Ae]=e.useState("date"),[ze,Ge]=e.useState("desc"),[Ve,qe]=e.useState("detailed"),[Ye,Je]=e.useState(!1),[Ke,Qe]=e.useState(!1),[Xe,Ze]=e.useState(1),[et,tt]=e.useState(50),[st,at]=e.useState("transactions"),[lt,rt]=e.useState([]),[nt,it]=e.useState(!1),[dt,ct]=e.useState(""),[ot,xt]=e.useState("");e.useEffect(()=>{if(null===Le)return;const e=window.setTimeout(()=>$e(null),2e3);return()=>window.clearTimeout(e)},[Le]),e.useEffect(()=>{mt()},[]);const mt=async()=>{V(!0),Ce(null);try{await Promise.all([ut(),ht(),gt()])}catch(e){Ce("Failed to load Trust Wallet data")}finally{V(!1)}},ut=async()=>{try{Y(!0);const e=await I.get("/trust-wallet/wallets"),t=await I.parseResponse(e);t.success&&(B(t.wallets||[]),t.wallets?.forEach(e=>{jt(e.id)}))}catch(e){}finally{Y(!1)}},ht=async()=>{try{const e=await I.get("/trust-wallet/summary"),t=await I.parseResponse(e);t.success&&W({overall:t.overall,by_network:t.by_network,by_token:t.by_token})}catch(e){}},gt=async()=>{try{K(!0);const e=await I.get("/trust-wallet/transactions?per_page=50"),t=await I.parseResponse(e);t.success&&z(t.transactions||[])}catch(e){}finally{K(!1)}},bt=async e=>{Z(t=>new Set(t).add(e));try{const t=await I.post(`/trust-wallet/wallets/${e}/sync`,{force_full_sync:!0}),s=await I.parseResponse(t);if(s.success)await Promise.all([ut(),ht(),gt()]),oe&&oe.id===e&&await yt(e);else{const e=s.error||"Failed to sync wallet",t=s.details||"";Ce(`${e}${t?`: ${t}`:""}`)}}catch(t){const e=t?.message||t?.response?.error||"Failed to sync wallet",s=t?.details||t?.response?.details||"";Ce(`${e}${s?`: ${s}`:""}`)}finally{Z(t=>{const s=new Set(t);return s.delete(e),s})}},pt=async e=>{const t=M.find(t=>t.id===e);t&&(xe(t),re(!0),at("transactions"),await yt(e))},wt=async e=>{try{it(!0);const t=new URLSearchParams;dt&&t.append("start_date",dt),ot&&t.append("end_date",ot);const s=await I.get(`/trust-wallet/wallets/${e}/historical-balances?${t.toString()}`),a=await I.parseResponse(s);a.success&&rt(a.historical_balances||[])}catch(t){Ce("Failed to load historical balances")}finally{it(!1)}},yt=async e=>{try{fe(!0);const t=[];let s=1,a=!0;const l=100;for(;a;){const r=await I.get(`/trust-wallet/wallets/${e}/transactions?page=${s}&per_page=${l}`),n=await I.parseResponse(r);if(n.success&&n.transactions){t.push(...n.transactions);const e=n.pagination;e&&s<e.total_pages?s++:a=!1}else a=!1}ye(t)}catch(t){Ce("Failed to load wallet transactions")}finally{fe(!1)}},jt=async e=>{try{ke(t=>({...t,[e]:!0}));const t=await I.get(`/trust-wallet/wallets/${e}/balance`),s=await I.parseResponse(t);s.success&&s.data?ve(t=>({...t,[e]:s.data})):void 0!==s.total_usd||s.balances?ve(t=>({...t,[e]:s})):ve(t=>({...t,[e]:null}))}catch(t){ve(t=>({...t,[e]:null}))}finally{ke(t=>({...t,[e]:!1}))}},ft=e.useMemo(()=>{let e=we;if(Re){const t=Re.toLowerCase();e=e.filter(e=>e.transaction_hash.toLowerCase().includes(t)||e.token_symbol.toLowerCase().includes(t)||e.from_address.toLowerCase().includes(t)||e.to_address.toLowerCase().includes(t))}return"all"!==Ie&&(e=e.filter(e=>e.transaction_type===Ie)),"all"!==Pe&&(e=e.filter(e=>e.token_symbol===Pe)),"all"!==Be&&(e=e.filter(e=>e.status===Be)),e=[...e].sort((e,t)=>{let s=0;return"date"===We?s=new Date(e.block_timestamp).getTime()-new Date(t.block_timestamp).getTime():"amount"===We?s=e.token_amount-t.token_amount:"gas"===We&&(s=(e.gas_fee||0)-(t.gas_fee||0)),"asc"===ze?s:-s}),e},[we,Re,Ie,Pe,Be,We,ze]);e.useMemo(()=>{const e=ft.filter(e=>"IN"===e.transaction_type).reduce((e,t)=>e+t.token_amount,0),t=ft.filter(e=>"OUT"===e.transaction_type).reduce((e,t)=>e+t.token_amount,0),s=ft.reduce((e,t)=>e+t.gas_fee,0),a=oe?(e=>{switch(e){case"ETH":default:return"ETH";case"BSC":return"BNB";case"TRC":return"TRX"}})(oe.network):"ETH";return{totalIn:e,totalOut:t,totalGas:s,count:ft.length,nativeToken:a}},[ft,oe]);const Nt=e.useMemo(()=>[...new Set(we.map(e=>e.token_symbol))].sort(),[we]),vt=e.useMemo(()=>{if(!Ye)return null;const e={};return ft.forEach(t=>{const s=new Date(t.block_timestamp).toISOString().split("T")[0];e[s]||(e[s]=[]),e[s].push(t)}),Object.entries(e).sort(([e],[t])=>t.localeCompare(e))},[ft,Ye]),_t=e.useMemo(()=>{if(Ye&&vt){const e=(Xe-1)*et,t=e+et,s=vt.length;return{paginatedDays:vt.slice(e,t),totalDays:s,totalPages:Math.ceil(s/et)}}{const e=(Xe-1)*et,t=e+et;return{paginatedTxs:ft.slice(e,t),totalPages:Math.ceil(ft.length/et),totalItems:ft.length}}},[ft,Ye,vt,Xe,et]);e.useEffect(()=>{Ze(1)},[Re,Ie,Pe,Be]);const kt=(e,t)=>"ETH"===t?`https://etherscan.io/tx/${e}`:"BSC"===t?`https://bscscan.com/tx/${e}`:"TRC"===t?`https://tronscan.org/#/transaction/${e}`:"",St=async e=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(e);else{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-9999px",document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}return!0}catch(t){return!1}},Ct=e.useMemo(()=>{let e=0,t=0;const s=M.every(e=>Ne[e.id]&&!_e[e.id]);return M.forEach(s=>{const a=Ne[s.id];a&&void 0!==a.total_usd&&(e+=a.total_usd,t++)}),{totalUSD:e,loadedWalletsCount:t,allBalancesLoaded:s,isLoading:M.length>0&&!s}},[M,Ne,_e]),Tt=M.filter(e=>{const t=e.wallet_name.toLowerCase().includes(Te.toLowerCase())||e.wallet_address.toLowerCase().includes(Te.toLowerCase()),s="all"===Fe||e.network===Fe;return t&&s}),Dt=[...new Set(M.map(e=>e.network))];return G?t.jsxs("div",{className:"w-full bg-gradient-to-br from-slate-50 via-white to-blue-50 min-h-screen",children:[t.jsx("div",{className:"mb-8 px-6 pt-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"space-y-2",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg animate-pulse"}),t.jsxs("div",{children:[t.jsx("div",{className:"h-8 bg-gray-200 rounded w-48 mb-2 animate-pulse"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-64 animate-pulse"})]})]})}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"h-10 bg-gray-200 rounded-xl w-20 animate-pulse"}),t.jsx("div",{className:"h-10 bg-gray-200 rounded-xl w-24 animate-pulse"})]})]})}),t.jsx("div",{className:"mb-8 px-6",children:t.jsx("div",{className:"h-12 bg-gray-200 rounded-xl w-80 animate-pulse"})}),t.jsx("div",{className:"mb-8 px-6",children:t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-lg animate-pulse"}),t.jsx("div",{className:"h-6 bg-gray-200 rounded w-40 animate-pulse"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-5 shadow-sm",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg animate-pulse mb-3"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"h-3 bg-gray-100 rounded w-20 animate-pulse"}),t.jsx("div",{className:"h-6 bg-gray-200 rounded w-24 animate-pulse"}),t.jsx("div",{className:"h-3 bg-gray-100 rounded w-28 animate-pulse"})]})]},e))})]})}),t.jsx("div",{className:"px-6 pb-8",children:t.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>t.jsx("div",{className:"bg-white/90 backdrop-blur-sm border border-gray-200 rounded-2xl p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg animate-pulse flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 mb-2 animate-pulse"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-48 mb-3 animate-pulse"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("div",{className:"h-6 bg-gray-200 rounded-full w-16 animate-pulse"}),t.jsx("div",{className:"h-6 bg-gray-200 rounded-full w-12 animate-pulse"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0 ml-6",children:[t.jsx("div",{className:"h-10 bg-gray-200 rounded-xl w-16 animate-pulse"}),t.jsx("div",{className:"h-10 bg-gray-200 rounded-xl w-16 animate-pulse"}),t.jsx("div",{className:"h-10 bg-gray-200 rounded-xl w-20 animate-pulse"})]})]})},e))})})]}):t.jsxs("div",{className:"w-full bg-gradient-to-br from-slate-50 via-white to-blue-50 min-h-screen",children:[t.jsxs("div",{className:"mb-8 px-6 pt-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"space-y-2",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:t.jsx(s,{className:"h-5 w-5 text-gray-600"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:l("trust_wallet.trust_wallets")}),t.jsx("p",{className:"text-gray-600 font-medium",children:l("trust_wallet.manage_blockchain_wallets")})]})]})}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:()=>{mt()},className:"px-5 py-2.5 text-sm font-medium border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-gray-300 transition-colors bg-white",children:[t.jsx(r,{className:"h-4 w-4 inline mr-2"}),l("trust_wallet.refresh")]}),t.jsxs("button",{onClick:async()=>{for(const e of M)e.is_active&&await bt(e.id)},disabled:X.size>0||0===M.length,className:"px-5 py-2.5 text-sm font-medium border border-gray-200 rounded-lg hover:bg-blue-50 hover:border-blue-300 hover:text-blue-600 transition-colors bg-white disabled:opacity-50 disabled:cursor-not-allowed",title:0===M.length?l("trust_wallet.no_wallets_to_sync"):l("trust_wallet.sync_all_wallets"),children:[t.jsx(r,{className:"h-4 w-4 inline mr-2 "+(X.size>0?"animate-spin":"")}),l("trust_wallet.sync_all")," ",X.size>0&&`(${X.size}/${M.length})`]}),t.jsxs("button",{onClick:()=>ae(!0),className:"group px-6 py-2.5 text-sm font-semibold bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm hover:shadow-md",children:[t.jsx(n,{className:"h-4 w-4 inline mr-2"}),l("trust_wallet.add_wallet")]})]})]}),Se&&t.jsx("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center mr-3",children:t.jsx(a,{className:"h-4 w-4 text-red-600"})}),t.jsx("span",{className:"text-red-800 font-medium",children:Se}),t.jsx("button",{onClick:()=>Ce(null),className:"ml-auto w-6 h-6 bg-red-100 hover:bg-red-200 rounded-lg flex items-center justify-center text-red-600 hover:text-red-700 transition-colors",children:t.jsx(i,{className:"h-4 w-4"})})]})})]}),t.jsx("div",{className:"mb-8 px-6",children:t.jsxs("div",{className:"flex gap-4 flex-wrap",children:[t.jsxs("div",{className:"relative flex-1 min-w-[280px]",children:[t.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:t.jsx(d,{className:"h-4 w-4 text-gray-400"})}),t.jsx("input",{type:"text",placeholder:l("trust_wallet.search_wallets_placeholder"),value:Te,onChange:e=>De(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none bg-white shadow-sm transition-colors"})]}),t.jsxs("div",{className:"relative min-w-[180px]",children:[t.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:t.jsx(c,{className:"h-4 w-4 text-gray-400"})}),t.jsxs("select",{value:Fe,onChange:e=>Ee(e.target.value),className:"w-full pl-12 pr-10 py-3 border border-gray-200 rounded-lg focus:outline-none bg-white shadow-sm transition-colors appearance-none cursor-pointer text-sm font-medium text-gray-700",children:[t.jsx("option",{value:"all",children:l("trust_wallet.all_networks")}),Dt.map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:t.jsx(o,{className:"h-4 w-4 text-gray-400"})})]})]})}),t.jsx("div",{className:"mb-8 px-6",children:t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:t.jsx(s,{className:"h-4 w-4 text-gray-600"})}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:l("trust_wallet.portfolio_summary")})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-5 shadow-sm hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("div",{className:"w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center",children:t.jsx(x,{className:"h-5 w-5 text-green-600"})}),Ct.isLoading&&t.jsx(r,{className:"h-4 w-4 text-gray-400 animate-spin"})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:l("trust_wallet.total_balance")}),Ct.isLoading?t.jsx("div",{className:"h-7 bg-gray-100 rounded animate-pulse w-28"}):t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",Ct.totalUSD.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.jsx("p",{className:"text-xs text-gray-500",children:l("trust_wallet.across_all_wallets","Across all wallets")})]})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-5 shadow-sm hover:shadow-md transition-shadow",children:[t.jsx("div",{className:"flex items-center justify-between mb-3",children:t.jsx("div",{className:"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center",children:t.jsx(s,{className:"h-5 w-5 text-purple-600"})})}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:l("trust_wallet.active_wallets","Active Wallets")}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:M.filter(e=>e.is_active).length}),t.jsxs("p",{className:"text-xs text-gray-500",children:[Ct.loadedWalletsCount," ",l("trust_wallet.with_loaded_balances","with loaded balances")]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-5 shadow-sm hover:shadow-md transition-shadow",children:[t.jsx("div",{className:"flex items-center justify-between mb-3",children:t.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center",children:t.jsx(m,{className:"h-5 w-5 text-blue-600"})})}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:l("trust_wallet.total_transactions")}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:H?.overall?.total_transactions?.toLocaleString()||0}),t.jsx("p",{className:"text-xs text-gray-500",children:l("trust_wallet.all_networks")})]})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-5 shadow-sm hover:shadow-md transition-shadow",children:[t.jsx("div",{className:"flex items-center justify-between mb-3",children:t.jsx("div",{className:"w-10 h-10 bg-orange-50 rounded-lg flex items-center justify-center",children:t.jsx(u,{className:"h-5 w-5 text-orange-600"})})}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:l("trust_wallet.active_networks")}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:Dt.length}),t.jsx("p",{className:"text-xs text-gray-500",children:Dt.join(", ")||l("common.none","None")})]})]})]})]})}),t.jsx("div",{className:"px-6 pb-8",children:Tt.length>0?t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:Tt.map(e=>{const n=Ne[e.id],i=n?.total_usd||0,d=_e[e.id],c=n?Object.keys(n.balances||{}).length:0;return t.jsx("div",{onClick:()=>pt(e.id),className:"cursor-pointer group",children:t.jsxs(U,{variant:"outlined",className:"hover:shadow-xl hover:border-gray-400 transition-all duration-300 relative overflow-hidden h-full bg-white",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-50/0 via-transparent to-blue-50/0 group-hover:from-slate-50/40 group-hover:to-blue-50/20 transition-all duration-500 pointer-events-none"}),t.jsxs("div",{className:"relative space-y-6 p-6",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3.5 flex-1 min-w-0",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-100 via-gray-50 to-slate-100 rounded-xl flex items-center justify-center flex-shrink-0 border border-gray-300 shadow-md group-hover:shadow-lg group-hover:scale-105 transition-all duration-300",children:t.jsx(s,{className:"h-6 w-6 text-gray-700"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-bold text-gray-900 text-lg truncate group-hover:text-black transition-colors",children:e.wallet_name}),t.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[t.jsxs("p",{className:"text-xs text-gray-500 font-mono truncate bg-gray-50 px-2 py-0.5 rounded border border-gray-200",children:[e.wallet_address.slice(0,10),"...",e.wallet_address.slice(-8)]}),t.jsx("button",{onClick:t=>(async(e,t,s)=>{e.stopPropagation(),await St(s)&&$e(t)})(t,e.id,e.wallet_address),className:"opacity-0 group-hover:opacity-100 transition-all duration-200 p-1 hover:bg-gray-100 rounded border border-transparent hover:border-gray-300",title:Le===e.id?l("trust_wallet.address_copied"):l("trust_wallet.copy_full_address"),children:Le===e.id?t.jsx(h,{className:"h-3.5 w-3.5 text-green-600"}):t.jsx(g,{className:"h-3.5 w-3.5 text-gray-400 hover:text-gray-700"})})]})]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-2 flex-shrink-0",children:[t.jsx(P,{variant:"outline",size:"sm",className:"text-xs font-semibold px-2.5 py-1",children:e.network}),e.is_active&&t.jsxs(P,{variant:"success",size:"sm",className:"text-xs font-semibold px-2.5 py-1",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1.5 animate-pulse shadow-sm shadow-green-500/50"}),l("trust_wallet.active")]})]})]}),t.jsxs("div",{className:"pt-5 border-t border-gray-300",children:[t.jsxs("div",{className:"flex items-baseline justify-between mb-3",children:[t.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:l("trust_wallet.total_balance")}),n?.last_updated&&t.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-400 bg-gray-50 px-2 py-1 rounded-md border border-gray-200",children:[t.jsx(b,{className:"h-3 w-3"}),t.jsx("span",{children:new Date(n.last_updated).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})]}),d?t.jsxs("div",{className:"flex items-center gap-3 mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsx(r,{className:"h-5 w-5 text-gray-400 animate-spin"}),t.jsx("span",{className:"text-sm font-medium text-gray-500",children:l("trust_wallet.loading_balance")})]}):n&&i>0?t.jsxs("div",{className:"mt-2",children:[t.jsxs("p",{className:"text-4xl font-extrabold text-gray-900 tracking-tight",children:["$",i.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),c>0&&t.jsxs("p",{className:"text-xs font-medium text-gray-500 mt-2 flex items-center gap-1.5",children:[t.jsx(x,{className:"h-3 w-3"}),c," ",l(1!==c?"trust_wallet.assets":"trust_wallet.asset")]})]}):n?t.jsxs("div",{className:"mt-2",children:[t.jsx("p",{className:"text-3xl font-bold text-gray-400",children:"$0.00"}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:l("trust_wallet.no_balance")})]}):null===n?t.jsx("div",{className:"mt-2",children:t.jsxs("p",{className:"text-sm font-medium text-red-600 bg-red-50 px-3 py-2 rounded-lg border border-red-200 flex items-center gap-2",children:[t.jsx(a,{className:"h-4 w-4"}),l("trust_wallet.failed_load_balance")]})}):t.jsx("div",{className:"mt-2",children:t.jsx("p",{className:"text-sm font-medium text-gray-500 bg-gray-50 px-3 py-2 rounded-lg border border-gray-200",children:l("trust_wallet.sync_wallet_see_balance")})})]}),n&&c>0&&t.jsxs("div",{className:"pt-5 border-t border-gray-300",children:[t.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(n.balances||{}).slice(0,4).map(([e,s])=>{const a="number"==typeof s?s:s.amount,l="object"==typeof s&&s.usd_value?s.usd_value:null,r=Number(a);return t.jsxs("div",{className:"relative bg-white border-2 border-gray-200 rounded-xl p-3 hover:border-gray-400 hover:shadow-md transition-all duration-200 group/token",children:[t.jsx("div",{className:"flex items-center justify-between mb-2",children:t.jsx("span",{className:"text-xs font-bold text-gray-600 uppercase tracking-wider",children:e})}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"text-base font-extrabold text-gray-900 truncate",title:String(a),children:r>=1e-4?r.toLocaleString("en-US",{maximumFractionDigits:6,minimumFractionDigits:0}):r.toExponential(2)}),null!=l&&l>0&&t.jsxs("div",{className:"text-xs font-semibold text-gray-600 flex items-center gap-1",children:[t.jsx("span",{className:"text-gray-400",children:"â‰ˆ"}),"$",l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]},e)})}),c>4&&t.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:t.jsxs("p",{className:"text-xs font-semibold text-gray-600 text-center bg-gray-50 py-2 rounded-lg border border-gray-200",children:["+",c-4," more ",l(c-4!=1?"trust_wallet.assets":"trust_wallet.asset")]})})]}),t.jsxs("div",{className:"pt-5 border-t border-gray-300 flex items-center justify-between",children:[t.jsxs("button",{onClick:t=>{t.stopPropagation(),bt(e.id)},disabled:X.has(e.id),className:"flex items-center gap-2 px-4 py-2 text-xs font-semibold text-gray-700 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed border border-gray-200 hover:border-blue-300 shadow-sm hover:shadow",title:l("trust_wallet.sync_wallet_title"),children:[t.jsx(r,{className:"h-4 w-4 "+(X.has(e.id)?"animate-spin":"")}),t.jsx("span",{children:X.has(e.id)?l("trust_wallet.syncing"):l("trust_wallet.sync")})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:t=>{t.stopPropagation(),(async e=>{const t=M.find(t=>t.id===e);t&&(ue(t),ie(!0))})(e.id)},className:"p-2 text-gray-500 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all border border-transparent hover:border-gray-300",title:l("trust_wallet.edit_wallet_title"),children:t.jsx(p,{className:"h-4 w-4"})}),t.jsx("button",{onClick:t=>{t.stopPropagation(),pt(e.id)},className:"p-2 text-gray-500 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all border border-transparent hover:border-blue-300",title:l("trust_wallet.view_details_title"),children:t.jsx(w,{className:"h-4 w-4"})}),t.jsx("button",{onClick:t=>{var s;t.stopPropagation(),s=e.id,ge(s),ce(!0),pe("")},disabled:ee.has(e.id),className:"p-2 text-gray-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed border border-transparent hover:border-red-300",title:l("trust_wallet.delete_wallet_title"),children:ee.has(e.id)?t.jsx(r,{className:"h-4 w-4 animate-spin"}):t.jsx(y,{className:"h-4 w-4"})})]})]})]})]})},e.id)})}):t.jsxs("div",{className:"text-center py-20",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-6",children:t.jsx(s,{className:"h-8 w-8 text-gray-400"})}),t.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:0===M.length?l("trust_wallet.no_wallets_connected"):l("trust_wallet.no_wallets_found")}),t.jsx("p",{className:"text-gray-600 max-w-md mx-auto text-lg leading-relaxed",children:0===M.length?l("trust_wallet.get_started_message"):l("trust_wallet.try_adjusting_search")}),0===M.length&&t.jsxs("button",{onClick:()=>ae(!0),className:"mt-8 px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-base font-semibold shadow-sm",children:[t.jsx(n,{className:"h-5 w-5 inline mr-2"}),l("trust_wallet.add_first_wallet")]})]})}),t.jsx(Q,{isOpen:se,onClose:()=>ae(!1),onSuccess:async e=>{ae(!1),await mt(),e&&setTimeout(()=>{bt(e)},500)}}),ne&&me&&t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:l("trust_wallet.edit_wallet")}),t.jsx("button",{onClick:()=>{ie(!1),ue(null)},className:"text-gray-400 hover:text-gray-600",children:t.jsx(i,{className:"h-5 w-5"})})]})}),t.jsxs("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.currentTarget);(async(e,t)=>{if(me)try{const s=await I.put(`/trust-wallet/wallets/${me.id}`,{wallet_name:e,is_active:t});(await I.parseResponse(s)).success&&(B(s=>s.map(s=>s.id===me.id?{...s,wallet_name:e,is_active:t}:s)),ie(!1),ue(null))}catch(s){Ce("Failed to update wallet")}})(t.get("wallet_name"),"on"===t.get("is_active"))},children:[t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:l("trust_wallet.wallet_name")}),t.jsx("input",{type:"text",name:"wallet_name",defaultValue:me.wallet_name,required:!0,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none",placeholder:l("trust_wallet.wallet_name")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:l("trust_wallet.wallet_address")}),t.jsx("input",{type:"text",value:me.wallet_address,disabled:!0,className:"w-full px-4 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed"}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:l("trust_wallet.address_cannot_changed")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:l("trust_wallet.network")}),t.jsx("input",{type:"text",value:me.network,disabled:!0,className:"w-full px-4 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",name:"is_active",id:"is_active",defaultChecked:me.is_active,className:"h-4 w-4 text-blue-600 focus:outline-none border-gray-300 rounded"}),t.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm font-medium text-gray-700",children:l("trust_wallet.active")})]})]}),t.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3 justify-end",children:[t.jsx("button",{type:"button",onClick:()=>{ie(!1),ue(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:l("common.cancel")}),t.jsxs("button",{type:"submit",className:"px-4 py-2 text-sm font-semibold bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(j,{className:"h-4 w-4 inline mr-1.5"}),l("clients_page.save_changes")]})]})]})]})}),de&&he&&t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:t.jsx(a,{className:"h-5 w-5 text-red-600"})}),t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:l("trust_wallet.delete_wallet")})]}),t.jsx("button",{onClick:()=>{ce(!1),ge(null),pe("")},className:"text-gray-400 hover:text-gray-600",children:t.jsx(i,{className:"h-5 w-5"})})]})}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx("p",{className:"text-sm text-red-800",children:l("trust_wallet.about_to_delete_wallet",{name:M.find(e=>e.id===he)?.wallet_name||""})}),t.jsx("p",{className:"text-sm text-red-700 mt-2",children:l("trust_wallet.delete_wallet_warning")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:l("trust_wallet.security_code")}),t.jsx("p",{className:"text-xs text-gray-500 mb-2",children:l("trust_wallet.enter_security_code_delete")}),t.jsx("input",{type:"text",value:be,onChange:e=>pe(e.target.value),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-center font-mono text-lg tracking-wider",placeholder:l("trust_wallet.enter_code"),autoFocus:!0,maxLength:4})]})]}),t.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3 justify-end",children:[t.jsx("button",{type:"button",onClick:()=>{ce(!1),ge(null),pe("")},className:"px-4 py-2 text-sm font-medium text-gray-700 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:l("common.cancel")}),t.jsx("button",{onClick:async()=>{if(he)if("4561"===be){if(!ee.has(he))try{te(e=>new Set(e).add(he));const e=await I.delete(`/trust-wallet/wallets/${he}`);(await I.parseResponse(e)).success?(B(e=>e.filter(e=>e.id!==he)),z(e=>e.filter(e=>e.wallet_id!==he)),await ht(),ce(!1),ge(null),pe("")):Ce("Failed to delete wallet")}catch(e){e instanceof Error&&e.message.includes("404")?(B(e=>e.filter(e=>e.id!==he)),z(e=>e.filter(e=>e.wallet_id!==he)),await ht(),ce(!1),ge(null),pe("")):Ce("Failed to delete wallet")}finally{te(e=>{const t=new Set(e);return t.delete(he),t})}}else Ce("Invalid security code. Please enter 4561")},disabled:ee.has(he),className:"px-4 py-2 text-sm font-semibold bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:ee.has(he)?t.jsxs(t.Fragment,{children:[t.jsx(r,{className:"h-4 w-4 inline mr-1.5 animate-spin"}),l("trust_wallet.deleting_wallet")]}):t.jsxs(t.Fragment,{children:[t.jsx(y,{className:"h-4 w-4 inline mr-1.5"}),l("trust_wallet.delete_wallet_button")]})})]})]})}),le&&oe&&t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-7xl w-full max-h-[95vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-white",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-50 flex items-center justify-center",children:t.jsx(s,{className:"h-5 w-5 text-gray-700"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:oe.wallet_name}),t.jsx("p",{className:"text-sm text-gray-500 font-mono truncate max-w-md mt-0.5",children:oe.wallet_address})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs font-medium text-gray-600 bg-gray-100 px-2.5 py-1 rounded border border-gray-200",children:oe.network}),oe.is_active&&t.jsx("span",{className:"text-xs font-medium text-gray-700 bg-gray-50 px-2.5 py-1 rounded border border-gray-200",children:l("trust_wallet.active")}),t.jsx("button",{onClick:()=>{re(!1),xe(null),ye([]),rt([]),Oe(""),Ue("all"),Me("all"),He("all"),Ae("date"),Ge("desc"),qe("detailed"),Je(!1),Qe(!1),Ze(1),tt(50),at("transactions"),ct(""),xt("")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(i,{className:"h-5 w-5 text-gray-500"})})]})]}),t.jsxs("div",{className:"flex items-center gap-2 px-6 pt-6 border-b border-gray-200 bg-white",children:[t.jsxs("button",{onClick:()=>{at("transactions")},className:"px-4 py-2 text-sm font-medium rounded-t-lg transition-colors "+("transactions"===st?"bg-white border-t border-x border-gray-200 text-gray-900":"text-gray-600 hover:text-gray-900"),children:[t.jsx(m,{className:"h-4 w-4 inline mr-2"}),l("trust_wallet.transactions_tab")]}),t.jsxs("button",{onClick:()=>{at("historical"),oe&&(ct(""),xt(""),wt(oe.id))},className:"px-4 py-2 text-sm font-medium rounded-t-lg transition-colors "+("historical"===st?"bg-white border-t border-x border-gray-200 text-gray-900":"text-gray-600 hover:text-gray-900"),children:[t.jsx(f,{className:"h-4 w-4 inline mr-2"}),l("trust_wallet.historical_balances")]})]}),"transactions"===st&&t.jsxs("div",{className:"p-6 bg-white border-b border-gray-200 space-y-4",children:[t.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:l("trust_wallet.search_transactions"),value:Re,onChange:e=>Oe(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none bg-white text-sm"})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>Qe(!Ke),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${Ke?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"} border border-gray-200`,children:[t.jsx(c,{className:"h-4 w-4 inline mr-1.5"}),l("trust_wallet.filters")]}),t.jsxs("button",{onClick:()=>Je(!Ye),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${Ye?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"} border border-gray-200`,children:[t.jsx(u,{className:"h-4 w-4 inline mr-1.5"}),l(Ye?"trust_wallet.ungroup":"trust_wallet.group")]}),t.jsxs("button",{onClick:()=>{const e=ft.map(e=>[new Date(e.block_timestamp).toISOString(),e.transaction_type,e.token_symbol,e.token_amount,e.gas_fee||0,e.status,e.from_address,e.to_address,e.transaction_hash].join(",")).join("\n"),t=new Blob(["Date,Type,Token,Amount,Gas Fee,Status,From,To,Hash\n"+e],{type:"text/csv"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`${oe?.wallet_name||"wallet"}_transactions_${(new Date).toISOString().split("T")[0]}.csv`,a.click(),window.URL.revokeObjectURL(s)},className:"px-4 py-2 bg-white text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50 border border-gray-200 transition-colors",children:[t.jsx(N,{className:"h-4 w-4 inline mr-1.5"}),l("trust_wallet.export")]}),t.jsxs("div",{className:"flex items-center gap-1 bg-white border border-gray-200 rounded-lg p-1",children:[t.jsx("button",{onClick:()=>qe("compact"),className:"px-3 py-1.5 rounded text-sm font-medium transition-colors "+("compact"===Ve?"bg-blue-100 text-blue-700":"text-gray-600"),children:t.jsx(v,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>qe("detailed"),className:"px-3 py-1.5 rounded text-sm font-medium transition-colors "+("detailed"===Ve?"bg-blue-100 text-blue-700":"text-gray-600"),children:t.jsx(_,{className:"h-4 w-4"})})]})]})]}),Ke&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 pt-4 border-t border-gray-200",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:l("trust_wallet.type")}),t.jsxs("select",{value:Ie,onChange:e=>Ue(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-white text-sm focus:outline-none",children:[t.jsx("option",{value:"all",children:l("trust_wallet.all")}),t.jsx("option",{value:"IN",children:l("trust_wallet.inbound")}),t.jsx("option",{value:"OUT",children:l("trust_wallet.outbound")}),t.jsx("option",{value:"INTERNAL",children:l("trust_wallet.internal")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:l("trust_wallet.token")}),t.jsxs("select",{value:Pe,onChange:e=>Me(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-white text-sm focus:outline-none",children:[t.jsx("option",{value:"all",children:l("trust_wallet.all")}),Nt.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:l("trust_wallet.status")}),t.jsxs("select",{value:Be,onChange:e=>He(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-white text-sm focus:outline-none",children:[t.jsx("option",{value:"all",children:l("trust_wallet.all")}),t.jsx("option",{value:"CONFIRMED",children:l("trust_wallet.confirmed")}),t.jsx("option",{value:"PENDING",children:l("trust_wallet.pending")}),t.jsx("option",{value:"FAILED",children:l("trust_wallet.failed")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:l("trust_wallet.sort_by")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{value:We,onChange:e=>Ae(e.target.value),className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg bg-white text-sm focus:outline-none",children:[t.jsx("option",{value:"date",children:l("trust_wallet.date")}),t.jsx("option",{value:"amount",children:l("trust_wallet.amount")}),t.jsx("option",{value:"gas",children:l("trust_wallet.gas_fee")})]}),t.jsx("button",{onClick:()=>Ge(e=>"asc"===e?"desc":"asc"),className:"px-3 py-2 bg-white border border-gray-200 rounded-lg text-gray-600 hover:bg-gray-100",children:"asc"===ze?t.jsx(k,{className:"h-4 w-4"}):t.jsx(S,{className:"h-4 w-4"})})]})]})]})]}),t.jsx("div",{className:"overflow-y-auto bg-white flex-1",children:"historical"===st?t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(C,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-blue-900",children:l(dt||ot?"trust_wallet.showing_filtered_balances":"trust_wallet.showing_complete_history")}),t.jsx("p",{className:"text-xs text-blue-700 mt-1",children:dt||ot?l("trust_wallet.date_range",{start:dt||l("trust_wallet.wallet_birth"),end:ot||l("trust_wallet.today")}):l("trust_wallet.displaying_all_balances")})]})]})}),t.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4 items-end",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:l("trust_wallet.start_date_optional")}),t.jsx("input",{type:"date",value:dt,onChange:e=>ct(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:l("trust_wallet.end_date_optional")}),t.jsx("input",{type:"date",value:ot,onChange:e=>xt(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("button",{onClick:()=>oe&&wt(oe.id),disabled:nt,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium disabled:opacity-50",children:[t.jsx(r,{className:"h-4 w-4 inline mr-2 "+(nt?"animate-spin":"")}),l(nt?"trust_wallet.loading":"trust_wallet.refresh_balances")]}),t.jsxs("button",{onClick:()=>{if(oe&&0!==lt.length)try{const e=new Set;lt.forEach(t=>{Object.keys(t.balances||{}).forEach(t=>e.add(t))});const t=Array.from(e).sort(),s=[],a=["Date","Total USD",...t.map(e=>`${e} Amount`),...t.map(e=>`${e} USD Value`)];s.push(a),lt.forEach(e=>{const a=[e.date,e.total_usd||0];t.forEach(t=>{const s=e.balances?.[t];a.push(s?.amount||0)}),t.forEach(t=>{const s=e.balances?.[t];a.push(s?.usd_value||0)}),s.push(a)});const l=$.aoa_to_sheet(s),r=$.book_new();$.book_append_sheet(r,l,"Historical Balances");const n=(new Date).toISOString().split("T")[0],i=`${oe.wallet_name}_historical_balances_${n}.xlsx`;R(r,i)}catch(e){Ce("Failed to export to Excel")}},disabled:0===lt.length,className:"px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-50 border border-gray-200 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(N,{className:"h-4 w-4 inline mr-2"}),l("trust_wallet.export_excel")]})]}),nt?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:t.jsx(r,{className:"h-6 w-6 animate-spin text-gray-600"})}),t.jsx("span",{className:"text-lg font-medium text-gray-600",children:l("trust_wallet.loading_historical_balances")})]})}):lt.length>0?t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full border-collapse",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:l("trust_wallet.date")}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:l("trust_wallet.total_usd")}),(()=>{const e=new Set;return lt.forEach(t=>{Object.keys(t.balances||{}).forEach(t=>e.add(t))}),Array.from(e).sort().map(e=>t.jsxs(T.Fragment,{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:l("trust_wallet.amount_header",{token:e})}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:l("trust_wallet.usd_header",{token:e})})]},e))})()]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:lt.map((e,s)=>{const a=new Set;lt.forEach(e=>{Object.keys(e.balances||{}).forEach(e=>a.add(e))});const l=Array.from(a).sort();return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 whitespace-nowrap",children:new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),t.jsxs("td",{className:"px-4 py-3 text-sm font-semibold text-gray-900 text-right",children:["$",(e.total_usd||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),l.map(s=>{const a=e.balances?.[s];return t.jsxs(T.Fragment,{children:[t.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 text-right",children:(a?.amount||0).toLocaleString("en-US",{maximumFractionDigits:6})}),t.jsxs("td",{className:"px-4 py-3 text-sm text-gray-600 text-right",children:["$",(a?.usd_value||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},s)})]},e.date||s)})})]})}):t.jsxs("div",{className:"text-center py-20",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:t.jsx(f,{className:"h-6 w-6 text-gray-400"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:l("trust_wallet.no_historical_balances")}),t.jsx("p",{className:"text-sm text-gray-600",children:l("trust_wallet.select_date_range_load")})]})]}):t.jsxs(t.Fragment,{children:[je?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:t.jsx(r,{className:"h-6 w-6 animate-spin text-gray-600"})}),t.jsx("span",{className:"text-lg font-medium text-gray-600",children:l("trust_wallet.loading_transactions")})]})}):ft.length>0?Ye&&_t.paginatedDays?t.jsx("div",{className:"space-y-6",children:_t.paginatedDays.map(([e,s])=>{const a=s.filter(e=>"IN"===e.transaction_type).reduce((e,t)=>e+t.token_amount,0)-s.filter(e=>"OUT"===e.transaction_type).reduce((e,t)=>e+t.token_amount,0);return t.jsxs("div",{children:[t.jsx("div",{className:"mb-4 pb-3 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-base font-semibold text-gray-900",children:new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[s.length," ",1!==s.length?l("trust_wallet.transactions"):l("trust_wallet.transaction")]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:l("trust_wallet.net_flow")}),t.jsx("div",{className:"text-base font-semibold "+(a>=0?"text-green-600":"text-red-600"),children:a.toLocaleString(void 0,{maximumFractionDigits:6})})]})]})}),t.jsx("div",{className:"space-y-2 pl-2 border-l border-gray-200",children:s.map(e=>{const s="compact"===Ve,a=kt(e.transaction_hash,e.network);return t.jsx("div",{className:"bg-white border border-gray-200 hover:border-gray-300 transition-colors "+(s?"p-3":"p-4"),children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[t.jsx("div",{className:"bg-white rounded-lg flex items-center justify-center border-2 shadow-sm flex-shrink-0 "+(s?"w-10 h-10":"w-12 h-12"),children:"IN"===e.transaction_type?t.jsx(D,{className:(s?"h-5 w-5":"h-6 w-6")+" text-green-600"}):"OUT"===e.transaction_type?t.jsx(F,{className:(s?"h-5 w-5":"h-6 w-6")+" text-red-600"}):t.jsx(E,{className:(s?"h-5 w-5":"h-6 w-6")+" text-blue-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[t.jsxs("span",{className:"font-bold text-gray-900 "+(s?"text-base":"text-lg"),children:[e.token_amount," ",e.token_symbol]}),t.jsx("span",{className:"px-2 py-1 rounded-md font-medium text-xs "+("IN"===e.transaction_type?"bg-green-100 text-green-700":"OUT"===e.transaction_type?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:e.transaction_type}),t.jsx("span",{className:"px-2 py-1 rounded-md font-medium text-xs "+("CONFIRMED"===e.status?"bg-green-100 text-green-700":"PENDING"===e.status?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:e.status})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 flex-wrap",children:[t.jsx("span",{children:new Date(e.block_timestamp).toLocaleString()}),!s&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-gray-300",children:"â€¢"}),t.jsxs("span",{className:"text-xs font-mono truncate max-w-[150px]",title:e.transaction_hash,children:[e.transaction_hash.slice(0,16),"..."]})]})]}),!s&&t.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-700 block mb-1",children:l("trust_wallet.from")}),t.jsx("div",{className:"font-mono text-xs text-gray-600 bg-gray-50 px-2 py-1.5 rounded break-all",children:e.from_address})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-700 block mb-1",children:l("trust_wallet.to")}),t.jsx("div",{className:"font-mono text-xs text-gray-600 bg-gray-50 px-2 py-1.5 rounded break-all",children:e.to_address})]})]})]})]}),t.jsxs("div",{className:"flex items-start gap-2 flex-shrink-0",children:[!s&&e.gas_fee&&e.gas_fee>0&&t.jsxs("div",{className:"text-right mr-4",children:[t.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-1",children:l("trust_wallet.gas")}),t.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[e.gas_fee," ",e.gas_fee_token]})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>St(e.transaction_hash),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:l("trust_wallet.copy_hash"),children:t.jsx(g,{className:"h-4 w-4 text-gray-500"})}),a&&t.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:l("trust_wallet.view_on_explorer"),children:t.jsx(L,{className:"h-4 w-4 text-gray-500"})})]})]})]})},e.id)})})]},e)})}):t.jsx("div",{className:"space-y-2",children:_t.paginatedTxs?.map(e=>{const s="compact"===Ve,a=kt(e.transaction_hash,e.network);return t.jsx("div",{className:"bg-white border border-gray-200 hover:border-gray-300 transition-colors "+(s?"p-3":"p-4"),children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[t.jsx("div",{className:"bg-white rounded-lg flex items-center justify-center border-2 shadow-sm flex-shrink-0 "+(s?"w-10 h-10":"w-12 h-12"),children:"IN"===e.transaction_type?t.jsx(D,{className:(s?"h-5 w-5":"h-6 w-6")+" text-green-600"}):"OUT"===e.transaction_type?t.jsx(F,{className:(s?"h-5 w-5":"h-6 w-6")+" text-red-600"}):t.jsx(E,{className:(s?"h-5 w-5":"h-6 w-6")+" text-blue-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"font-bold text-gray-900 "+(s?"text-base":"text-lg"),children:[e.token_amount," ",e.token_symbol]}),e.token_name&&e.token_name!==e.token_symbol&&t.jsx("div",{className:"text-xs text-gray-500",children:e.token_name})]}),t.jsx("span",{className:"px-2 py-1 rounded-md font-medium text-xs "+("IN"===e.transaction_type?"bg-green-100 text-green-700":"OUT"===e.transaction_type?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:e.transaction_type}),t.jsx("span",{className:"px-2 py-1 rounded-md font-medium text-xs "+("CONFIRMED"===e.status?"bg-green-100 text-green-700":"PENDING"===e.status?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:e.status})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 flex-wrap",children:[t.jsx("span",{children:new Date(e.block_timestamp).toLocaleString()}),!s&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-gray-300",children:"â€¢"}),t.jsxs("span",{className:"text-xs font-mono truncate max-w-[150px]",title:e.transaction_hash,children:[e.transaction_hash.slice(0,16),"..."]})]})]}),!s&&t.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-700 block mb-1",children:"From:"}),t.jsx("div",{className:"font-mono text-xs text-gray-600 bg-gray-50 px-2 py-1.5 rounded break-all",children:e.from_address})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-700 block mb-1",children:"To:"}),t.jsx("div",{className:"font-mono text-xs text-gray-600 bg-gray-50 px-2 py-1.5 rounded break-all",children:e.to_address})]})]})]})]}),t.jsxs("div",{className:"flex items-start gap-2 flex-shrink-0",children:[!s&&e.gas_fee&&e.gas_fee>0&&t.jsxs("div",{className:"text-right mr-4",children:[t.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-1",children:l("trust_wallet.gas")}),t.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[e.gas_fee," ",e.gas_fee_token]})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>St(e.transaction_hash),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:l("trust_wallet.copy_hash"),children:t.jsx(g,{className:"h-4 w-4 text-gray-500"})}),a&&t.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:l("trust_wallet.view_on_explorer"),children:t.jsx(L,{className:"h-4 w-4 text-gray-500"})})]})]})]})},e.id)})}):t.jsxs("div",{className:"text-center py-20",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:t.jsx(s,{className:"h-6 w-6 text-gray-400"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:l("trust_wallet.no_transactions_found")}),t.jsx("p",{className:"text-sm text-gray-600",children:0===we.length?l("trust_wallet.no_transactions_yet"):l("trust_wallet.no_transactions_match_filters")})]}),ft.length>0&&_t.totalPages>1&&t.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 p-6 bg-white border-t border-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-xs sm:text-sm text-gray-600",children:l("trust_wallet.per_page")}),t.jsxs("select",{value:et,onChange:e=>{tt(Number(e.target.value)),Ze(1)},className:"px-3 py-1.5 border border-gray-200 rounded-lg bg-white text-sm focus:outline-none",children:[t.jsx("option",{value:"25",children:"25"}),t.jsx("option",{value:"50",children:"50"}),t.jsx("option",{value:"100",children:"100"}),t.jsx("option",{value:"200",children:"200"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>Ze(e=>Math.max(1,e-1)),disabled:1===Xe,className:"px-3 py-2 border border-gray-200 rounded-lg bg-white text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed text-xs sm:text-sm font-medium",children:l("trust_wallet.prev")}),t.jsx("div",{className:"text-xs sm:text-sm text-gray-600 whitespace-nowrap",children:l("trust_wallet.page_of",{current:Xe,total:_t.totalPages})}),t.jsx("button",{onClick:()=>Ze(e=>Math.min(_t.totalPages,e+1)),disabled:Xe===_t.totalPages,className:"px-3 py-2 border border-gray-200 rounded-lg bg-white text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed text-xs sm:text-sm font-medium",children:l("trust_wallet.next")})]})]})]})})]})})]})};export{X as T};
