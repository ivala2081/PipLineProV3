const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/components-modern-C3CPxipx.js","js/vendor-react-OTlZW24_.js","js/contexts-ClDLaFbv.js","js/vendor-i18n-DHLiip7K.js","js/components-ui-CpjZxCxu.js","js/vendor-utils-CtF19A-_.js","js/vendor-charts-recharts-DLiVWtHJ.js","js/pages-ChHhNcds.js","js/components-trust-DTGixXDn.js","js/pages-systemmonitor-R69PhKQe.js","js/pages-accounting-nKHpZC0j.js","js/TabShowcase-Da8iRdt4.js"])))=>i.map(i=>d[i]);
import{cp as e,cq as t,cr as a,aH as s,j as n,cs as r,r as o,V as i,ct as l,cu as c,cv as d,cw as m,cx as u,cy as p,R as h,cz as g}from"./vendor-react-OTlZW24_.js";import{a as _,_ as y,l as f,o as v}from"./components-modern-C3CPxipx.js";import{L as x,E as j}from"./pages-ChHhNcds.js";import{a as w,u as b,A as E,L as k,N as T,c as R,d as P}from"./contexts-ClDLaFbv.js";import{y as A}from"./components-ui-CpjZxCxu.js";import"./vendor-utils-CtF19A-_.js";import"./vendor-charts-recharts-DLiVWtHJ.js";import"./components-trust-DTGixXDn.js";import"./vendor-i18n-DHLiip7K.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const L=e("dashboard/fetchDashboardData",async(e,{rejectWithValue:t})=>{try{const t=await _.get(`/api/v1/dashboard/consolidated?range=${e}`),a=await _.parseResponse(t);return{dashboardData:{stats:{total_revenue:{value:a.stats?.total_revenue?.value||"₺0",change:a.stats?.total_revenue?.change||"N/A",changeType:a.stats?.total_revenue?.changeType||"positive"},total_transactions:{value:a.stats?.total_transactions?.value||"0",change:a.stats?.total_transactions?.change||"N/A",changeType:a.stats?.total_transactions?.changeType||"positive"},active_clients:{value:a.stats?.active_clients?.value||"0",change:a.stats?.active_clients?.change||"N/A",changeType:a.stats?.active_clients?.changeType||"positive"},growth_rate:{value:a.stats?.growth_rate?.value||"0%",change:a.stats?.growth_rate?.change||"N/A",changeType:a.stats?.growth_rate?.changeType||"positive"}},recent_transactions:a.recent_transactions||[],summary:{total_revenue:a.summary?.total_revenue||parseFloat((a.stats?.total_revenue?.value||"0").replace(/[₺,]/g,""))||0,total_commission:a.summary?.total_commission||a.commission_analytics?.total_commission||0,total_net:a.summary?.total_net||parseFloat((a.stats?.total_revenue?.value||"0").replace(/[₺,]/g,""))-(a.commission_analytics?.total_commission||0),transaction_count:a.summary?.transaction_count||parseInt((a.stats?.total_transactions?.value||"0").replace(/,/g,""))||0,active_clients:a.summary?.active_clients||parseInt((a.stats?.active_clients?.value||"0").replace(/,/g,""))||0,net_cash:a.summary?.net_cash||a.financial_performance?.annual?.net_cash_tl||0,daily_revenue:a.summary?.daily_revenue||0,weekly_revenue:a.summary?.weekly_revenue||0,monthly_revenue:a.summary?.monthly_revenue||0,annual_revenue:a.summary?.annual_revenue||0,daily_revenue_trend:a.summary?.daily_revenue_trend||0,weekly_revenue_trend:a.summary?.weekly_revenue_trend||0,monthly_revenue_trend:a.summary?.monthly_revenue_trend||0,annual_revenue_trend:a.summary?.annual_revenue_trend||0},chart_data:{daily_revenue:a.chart_data?.daily_revenue?.map(e=>({date:e.date,amount:e.net_cash||e.amount||0,net_cash:e.net_cash||e.amount||0}))||[],monthly_trends:[],client_distribution:[]},revenue_trends:a.chart_data?.daily_revenue?.map(e=>({date:e.date,revenue:e.net_cash||e.amount||0}))||[]},topPerformers:{volume_leaders:a.psp_summary?.slice(0,5).map(e=>({name:e.psp,value:e.total_amount||0,transactions:e.transaction_count||0}))||[],count_leaders:a.psp_summary?.slice(0,5).map(e=>({name:e.psp,count:e.transaction_count||0,total:e.total_amount||0}))||[],period:`Last ${e}`},revenueTrends:{success:!0,data:{daily_revenue:a.chart_data?.daily_revenue?.map(e=>({date:e.date,revenue:e.net_cash||e.amount||0,commission:0,net:e.net_cash||e.amount||0,transactions:e.transactions||0}))||[],metrics:{total_revenue:parseFloat((a.stats?.total_revenue?.value||"0").replace(/[₺,]/g,""))||0,total_transactions:parseInt((a.stats?.total_transactions?.value||"0").replace(/,/g,""))||0,avg_transaction_value:(parseFloat((a.stats?.total_revenue?.value||"0").replace(/[₺,]/g,""))||0)/(parseInt((a.stats?.total_transactions?.value||"0").replace(/,/g,""))||1),revenue_growth_percent:15.2,profit_margin:85}}},commissionAnalytics:a.commission_analytics||null}}catch(a){return t(a instanceof Error?a.message:"Failed to fetch dashboard data")}}),D=e("dashboard/fetchSecondaryData",async(e,{rejectWithValue:t,getState:a})=>{try{const t=a(),{dashboardData:s,revenueTrends:n}=t.dashboard;if(!s||!n)throw new Error("Primary dashboard data not available");const r=await _.get(`/api/v1/analytics/top-performers?range=${e}`),o=await _.parseResponse(r),[i,l,c]=await Promise.all([_.get("/api/v1/analytics/system/performance"),_.get("/api/v1/analytics/data/quality"),_.get("/api/v1/analytics/security/metrics")]),d=await _.parseResponse(i),m=await _.parseResponse(l),u=await _.parseResponse(c);return{topPerformers:{volume_leaders:o.volume_leaders||[],count_leaders:o.count_leaders||[],period:`Last ${e}`},systemPerformance:d||{api_response_time:120,database_response_time:45,uptime_percentage:99.9,cpu_usage:25.5,memory_usage:45.2,disk_usage:26.2,system_health:"healthy"},dataQuality:m||{overall_quality_score:95.5,client_completeness:98.2,amount_completeness:99.8,date_completeness:100,potential_duplicates:0,total_records:s.summary.transaction_count,data_freshness:"current",validation_status:"passed"},integrationStatus:{bank_connections:{status:"connected",last_check:(new Date).toISOString(),response_time:45},psp_connections:{status:"connected",active_psps:s.summary.active_clients,psp_list:[],last_check:(new Date).toISOString()},api_endpoints:{status:"healthy",total_endpoints:12,active_endpoints:12,last_check:(new Date).toISOString()},webhook_delivery:{status:"active",success_rate:98.5,last_delivery:(new Date).toISOString()}},securityMetrics:u||{failed_logins:{today:3,this_week:12,this_month:45,trend:"decreasing"},suspicious_activities:{total_alerts:2,high_priority:0,medium_priority:1,low_priority:1,last_alert:(new Date).toISOString()},session_management:{active_sessions:5,expired_sessions:23,average_session_duration:"2.5 hours"},access_patterns:{normal_access:98.5,unusual_access:1.5,last_analysis:(new Date).toISOString()},security_incidents:{total_incidents:0,resolved_incidents:0,open_incidents:0}},volumeAnalysis:{success:!0,data:{hourly_volume:[],daily_volume:s.chart_data?.daily_revenue?.map(e=>({day:new Date(e.date).getDay(),count:1,volume:e.amount}))||[],psp_volume:[],insights:{peak_hour:14,peak_day:2,total_transactions:s.summary.transaction_count,total_volume:s.summary.total_revenue}}},clientAnalytics:{success:!0,data:{client_analytics:s.chart_data?.client_distribution?.map(e=>({client_name:e.name,transaction_count:1,total_volume:e.value,avg_transaction:e.value,last_transaction:(new Date).toISOString(),volume_percentage:0,segment:"Regular"}))||[],segment_distribution:{},metrics:{total_clients:s.summary.active_clients,total_volume:s.summary.total_revenue,avg_volume_per_client:s.summary.total_revenue/s.summary.active_clients,top_client_volume:s.chart_data?.client_distribution?.[0]?.value||0}}},commissionAnalytics:{success:!0,data:{psp_commission:[],daily_commission:[],metrics:{total_commission:s.summary.total_commission,total_volume:s.summary.total_revenue,overall_rate:s.summary.total_commission/s.summary.total_revenue*100,avg_daily_commission:s.summary.total_commission/7,top_psp_commission:s.summary.total_commission}}}}}catch(s){return t(s instanceof Error?s.message:"Failed to fetch secondary data")}}),S=t({name:"dashboard",initialState:{dashboardData:null,topPerformers:null,revenueTrends:null,systemPerformance:null,dataQuality:null,integrationStatus:null,securityMetrics:null,volumeAnalysis:null,clientAnalytics:null,commissionAnalytics:null,loading:!1,error:null,refreshing:!1,timeRange:"all",activeTab:"overview",lastFetchTime:0,dataCache:{}},reducers:{setTimeRange:(e,t)=>{e.timeRange=t.payload},setActiveTab:(e,t)=>{e.activeTab=t.payload},setLoading:(e,t)=>{e.loading=t.payload},setError:(e,t)=>{e.error=t.payload},setRefreshing:(e,t)=>{e.refreshing=t.payload},clearError:e=>{e.error=null},clearCache:e=>{e.dataCache={},e.lastFetchTime=0}},extraReducers:e=>{e.addCase(L.pending,e=>{e.loading=!0,e.error=null}).addCase(L.fulfilled,(e,t)=>{e.loading=!1,e.error=null,e.lastFetchTime=Date.now(),t.payload.dashboardData&&(e.dashboardData=t.payload.dashboardData),t.payload.topPerformers&&(e.topPerformers=t.payload.topPerformers),t.payload.revenueTrends&&(e.revenueTrends=t.payload.revenueTrends),t.payload.commissionAnalytics&&(e.commissionAnalytics=t.payload.commissionAnalytics)}).addCase(L.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}).addCase(D.fulfilled,(e,t)=>{t.payload.topPerformers&&(e.topPerformers=t.payload.topPerformers),t.payload.systemPerformance&&(e.systemPerformance=t.payload.systemPerformance),t.payload.dataQuality&&(e.dataQuality=t.payload.dataQuality),t.payload.integrationStatus&&(e.integrationStatus=t.payload.integrationStatus),t.payload.securityMetrics&&(e.securityMetrics=t.payload.securityMetrics),t.payload.volumeAnalysis&&(e.volumeAnalysis=t.payload.volumeAnalysis),t.payload.clientAnalytics&&(e.clientAnalytics=t.payload.clientAnalytics),t.payload.commissionAnalytics&&(e.commissionAnalytics=t.payload.commissionAnalytics)}).addCase(O.fulfilled,(e,t)=>{t.payload.commissionAnalytics&&(e.commissionAnalytics=t.payload.commissionAnalytics)}).addCase(O.rejected,(e,t)=>{e.error=t.payload}).addCase(C.fulfilled,(e,t)=>{t.payload.clientAnalytics&&(e.clientAnalytics=t.payload.clientAnalytics)}).addCase(C.rejected,(e,t)=>{e.error=t.payload})}}),O=e("dashboard/fetchCommissionAnalytics",async(e,{rejectWithValue:t})=>{try{const t=await _.get(`/api/v1/analytics/commission/analytics?range=${e}`),a=await _.parseResponse(t);if(!a.success)throw new Error(a.error||"Failed to fetch commission analytics");return{commissionAnalytics:a}}catch(a){return t(a instanceof Error?a.message:"Failed to fetch commission analytics")}}),C=e("dashboard/fetchClientAnalytics",async(e,{rejectWithValue:t})=>{try{const t=await _.get(`/api/v1/analytics/clients/analytics?range=${e}`),a=await _.parseResponse(t);if(!a.success)throw new Error(a.error||"Failed to fetch client analytics");return{clientAnalytics:a}}catch(a){return t(a instanceof Error?a.message:"Failed to fetch client analytics")}});e("dashboard/fetchTopPerformers",async(e,{rejectWithValue:t})=>{try{const t=await _.get(`/api/v1/analytics/top-performers?range=${e}`),a=await _.parseResponse(t);return{volume_leaders:a.volume_leaders||[],count_leaders:a.count_leaders||[],period:`Last ${e}`}}catch(a){return t(a.message||"Failed to fetch top performers")}}),e("dashboard/fetchPspRolloverData",async(e,{rejectWithValue:t})=>{try{const e=await _.get("/api/v1/analytics/psp-rollover-summary"),t=await _.parseResponse(e);return{psps:t.psps||[],total_rollover:t.total_rollover||0,period:"Current"}}catch(a){return t(a.message||"Failed to fetch PSP rollover data")}});const I=S.reducer,N=t({name:"user",initialState:{user:null,isAuthenticated:!1,isLoading:!0,error:null},reducers:{setUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!!t.payload},setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload},clearUser:e=>{e.user=null,e.isAuthenticated=!1,e.error=null},updateUserPermissions:(e,t)=>{e.user&&(e.user.permissions=t.payload)}}}).reducer,V={settings:{language:"en",theme:"light",timezone:"UTC",currency:"₺",dateFormat:"YYYY-MM-DD",notifications:{email:!0,push:!1,sms:!1},dashboard:{defaultTimeRange:"7d",autoRefresh:!0,refreshInterval:3e5,showCharts:!0,showMetrics:!0}},isLoading:!1,error:null},F=a({reducer:{dashboard:I,user:N,settings:t({name:"settings",initialState:V,reducers:{setSettings:(e,t)=>{e.settings={...e.settings,...t.payload}},setLanguage:(e,t)=>{e.settings.language=t.payload},setTheme:(e,t)=>{e.settings.theme=t.payload},setCurrency:(e,t)=>{e.settings.currency=t.payload},setDashboardSettings:(e,t)=>{e.settings.dashboard={...e.settings.dashboard,...t.payload}},setNotificationSettings:(e,t)=>{e.settings.notifications={...e.settings.notifications,...t.payload}},setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload},resetSettings:e=>{e.settings=V.settings}}}).reducer,exchangeRates:t({name:"exchangeRates",initialState:{rates:{},loading:!1,error:null,lastUpdated:null,selectedDate:(new Date).toISOString().slice(0,10)},reducers:{setRates:(e,t)=>{e.rates=t.payload,e.lastUpdated=new Date},setLoading:(e,t)=>{e.loading=t.payload},setError:(e,t)=>{e.error=t.payload},setSelectedDate:(e,t)=>{e.selectedDate=t.payload},updateRate:(e,t)=>{e.rates[t.payload.currencyPair]=t.payload.rate,e.lastUpdated=new Date},clearRates:e=>{e.rates={},e.lastUpdated=null},clearError:e=>{e.error=null}}}).reducer},middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"],ignoredActionPaths:["meta.arg","payload.timestamp"],ignoredPaths:["items.dates"]}}),devTools:!1}),z=({children:e,requireAdmin:t=!1,requirePermission:a})=>{const{user:o,isAuthenticated:i,isLoading:l}=w(),c=s();return l?n.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f9fafb"},children:n.jsx(x,{})}):i||null!==o?o&&!o.is_active?n.jsx(r,{to:"/login",state:{from:c,message:"Account is deactivated"},replace:!0}):o&&o.account_locked_until&&new Date(o.account_locked_until)>new Date?n.jsx(r,{to:"/login",state:{from:c,message:"Account is temporarily locked"},replace:!0}):t&&o&&!("admin"===o.role?.toLowerCase()||void 0!==o.admin_level&&o.admin_level>=1&&o.admin_level<=3)?n.jsx(r,{to:"/dashboard",state:{message:"Access denied. Admin privileges required."},replace:!0}):a&&o&&!o.permissions[a]?n.jsx(r,{to:"/dashboard",state:{message:"Access denied. Insufficient permissions."},replace:!0}):n.jsx(n.Fragment,{children:e}):n.jsx(r,{to:"/login",state:{from:c},replace:!0})},M={refreshInterval:18e5,dedupingInterval:36e5,errorRetryCount:1,errorRetryInterval:5e3,revalidateOnFocus:!1,revalidateOnReconnect:!1,revalidateOnMount:!1,compare:(e,t)=>JSON.stringify(e)===JSON.stringify(t),revalidateIfStale:!1,loadingTimeout:15e3},$=()=>{const[e,t]=o.useState(!1);return o.useEffect(()=>{const e=e=>{"Tab"===e.key&&t(!0)},a=()=>{t(!1)};return document.addEventListener("keydown",e),document.addEventListener("click",a),()=>{document.removeEventListener("keydown",e),document.removeEventListener("click",a)}},[]),e?n.jsxs("div",{className:"fixed top-0 left-0 z-50 p-4 space-y-2",children:[n.jsx("button",{onClick:()=>{const e=document.querySelector("main");e&&(e.focus(),e.scrollIntoView({behavior:"smooth"}))},className:"block w-full bg-gray-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors","aria-label":"Skip to main content",children:"Skip to main content"}),n.jsx("button",{onClick:()=>{const e=document.querySelector("nav");e&&(e.focus(),e.scrollIntoView({behavior:"smooth"}))},className:"block w-full bg-gray-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors","aria-label":"Skip to navigation",children:"Skip to navigation"})]}):null},W=()=>{const{isNavigating:e,loadingMessage:t}=b();return e?n.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-sm border-b border-slate-200",children:n.jsx("div",{className:"flex items-center justify-center py-3 px-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(i,{className:"w-5 h-5 animate-spin text-blue-600"}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]})})}):null},H=new class{metrics=new Map;config;preloadQueue=new Set;performanceObserver=null;constructor(e={}){this.config={enablePreloading:!0,preloadThreshold:2e3,cacheSize:50,retryStrategy:"exponential",performanceMonitoring:!0,...e},this.config.performanceMonitoring&&this.setupPerformanceMonitoring()}setupPerformanceMonitoring(){"undefined"!=typeof window&&"PerformanceObserver"in window&&(this.performanceObserver=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"navigation"!==e.entryType&&"resource"!==e.entryType||this.analyzePerformanceEntry(e)})}),this.performanceObserver.observe({entryTypes:["navigation","resource"]}))}analyzePerformanceEntry(e){e.duration,this.config.preloadThreshold}recordMetrics(e,t){this.metrics.has(e)||this.metrics.set(e,[]);const a=this.metrics.get(e);a.push({loadTime:0,cacheHit:!1,retryCount:0,errorRate:0,preloadSuccess:!1,...t}),a.length>100&&a.splice(0,a.length-100)}getOptimizationRecommendations(e){const t=this.metrics.get(e);if(!t||0===t.length)return["No metrics available for optimization"];const a=[],s=t.slice(-10),n=s.reduce((e,t)=>e+t.loadTime,0)/s.length,r=s.reduce((e,t)=>e+t.retryCount,0)/s.length,o=s.filter(e=>e.errorRate>0).length/s.length;return n>this.config.preloadThreshold&&a.push("Consider preloading this component due to slow load times"),r>1&&a.push("High retry count detected - check network stability or component size"),o>.1&&a.push("High error rate detected - investigate component dependencies"),s.filter(e=>e.cacheHit).length/s.length<.5&&a.push("Low cache hit rate - consider improving caching strategy"),a.length>0?a:["Component is performing well"]}preloadBasedOnPatterns(){if(!this.config.enablePreloading)return;const e=new Map;this.metrics.forEach((t,a)=>{e.set(a,t.length)}),Array.from(e.entries()).sort(([,e],[,t])=>t-e).slice(0,5).forEach(([e])=>{this.preloadQueue.has(e)||(this.preloadQueue.add(e),this.preloadComponent(e))})}async preloadComponent(e){this.preloadQueue.delete(e)}getPerformanceStats(){const e=[],t={};return this.metrics.forEach((a,s)=>{e.push(...a),t[s]=this.getOptimizationRecommendations(s)}),{totalComponents:this.metrics.size,avgLoadTime:e.length>0?e.reduce((e,t)=>e+t.loadTime,0)/e.length:0,totalErrors:e.filter(e=>e.errorRate>0).length,cacheHitRate:e.length>0?e.filter(e=>e.cacheHit).length/e.length:0,recommendations:t}}cleanup(){this.performanceObserver&&(this.performanceObserver.disconnect(),this.performanceObserver=null),this.metrics.clear(),this.preloadQueue.clear()}updateConfig(e){this.config={...this.config,...e}}};o.lazy(()=>y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.r),__vite__mapDeps([0,1,2,3,4,5,6]))),o.lazy(()=>y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.R),__vite__mapDeps([0,1,2,3,4,5,6]))),o.lazy(()=>y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.D),__vite__mapDeps([0,1,2,3,4,5,6]))),o.lazy(()=>y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.G),__vite__mapDeps([0,1,2,3,4,5,6]))),o.lazy(()=>y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.p),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>({default:e.ModernHeader}))),o.lazy(()=>y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.q),__vite__mapDeps([0,1,2,3,4,5,6]))),o.lazy(()=>y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.N),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>({default:e.NotificationSystem}))),o.lazy(()=>y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.s),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>({default:e.ProgressIndicator}))),o.lazy(()=>y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.S),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>({default:e.SkeletonLoader})));const U=new class{imageObserver=null;lazyImages=new Set;setupLazyImages(){"undefined"!=typeof window&&"IntersectionObserver"in window&&(this.imageObserver=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target,a=t.dataset.src;a&&(t.src=a,t.removeAttribute("data-src"),this.imageObserver?.unobserve(t),this.lazyImages.delete(t))}})},{rootMargin:"50px"}),document.querySelectorAll("img[data-src]").forEach(e=>{this.lazyImages.add(e),this.imageObserver?.observe(e)}))}preloadResource(e,t){if("undefined"==typeof document)return;const a=document.createElement("link");a.rel="preload",a.href=e,a.as=t,document.head.appendChild(a)}prefetchResource(e){if("undefined"==typeof document)return;const t=document.createElement("link");t.rel="prefetch",t.href=e,document.head.appendChild(t)}debounce(e,t){let a=null;return function(...s){a&&clearTimeout(a),a=setTimeout(()=>{a=null,e(...s)},t)}}throttle(e,t){let a;return function(...s){a||(e(...s),a=!0,setTimeout(()=>a=!1,t))}}measurePerformance(e,t){if("undefined"==typeof performance)return void t();const a=performance.now();t();const s=performance.now()-a;f.performance(e,s),s>100&&f.warn(`Slow operation detected: ${e} took ${s.toFixed(2)}ms`)}cleanup(){this.imageObserver&&(this.lazyImages.forEach(e=>{this.imageObserver?.unobserve(e)}),this.lazyImages.clear(),this.imageObserver.disconnect(),this.imageObserver=null)}},q=new Map,Q=new Set,B=({importFn:e,fallback:t=n.jsx(x,{}),errorFallback:a,preload:s=!0,preloadDelay:r=1e3,retryCount:i=3,retryDelay:l=2e3,...c})=>{const{state:d,retry:m}=((e,t={})=>{const{preload:a=!1,preloadDelay:s=0,cache:n=!0,retryCount:r=3,retryDelay:i=1e3}=t,[l,c]=o.useState({isLoading:!1,isLoaded:!1,error:null,retryCount:0}),d=o.useRef(e),m=o.useRef(e.toString());o.useEffect(()=>{d.current=e,m.current=e.toString()},[e]);const u=o.useCallback(async()=>{const e=m.current;if(n&&q.has(e))c(e=>({...e,isLoaded:!0,isLoading:!1,error:null}));else{c(e=>({...e,isLoading:!0,error:null}));try{const t=await d.current();if(!t||!t.default)throw new Error(`Component does not have a default export. Received: ${JSON.stringify(Object.keys(t||{}))}`);n&&q.set(e,t),c(e=>({...e,isLoaded:!0,isLoading:!1,error:null,retryCount:0}))}catch(t){const e=t,a=e.message?.includes("Failed to fetch")||e.message?.includes("Loading chunk")||e.message?.includes("ChunkLoadError")||"ChunkLoadError"===e.name||e.message?.includes("network error")||e.message?.includes("Failed to fetch dynamically imported module");c(t=>{const s=t.retryCount;if(s<(a?1:r))return setTimeout(()=>{u()},a?2*i:i),{...t,retryCount:s+1};{const s=e;return s.isChunkError=a,{...t,isLoading:!1,error:s}}})}}},[n,r,i]),p=o.useCallback(async()=>{const e=m.current;if(!Q.has(e)){Q.add(e),s>0&&await new Promise(e=>setTimeout(e,s));try{const t=await d.current();n&&q.set(e,t),Q.delete(e)}catch(t){Q.delete(e)}}},[s,n]),h=o.useCallback(async()=>{c(e=>({...e,retryCount:0,error:null})),await u()},[u]),g=o.useCallback(()=>{const e=m.current;q.delete(e),c(e=>({...e,isLoaded:!1}))},[]);return o.useEffect(()=>{a&&p()},[a,p]),{state:l,preload:p,retry:h,clearCache:g}})(e,{preload:s,preloadDelay:r,cache:!0,retryCount:i,retryDelay:l}),u=o.lazy(()=>e().catch(e=>{const t={message:e?.message||"Unknown error",stack:e?.stack||"No stack trace",name:e?.name||"Error"},a=t.message?.includes("Failed to fetch")||t.message?.includes("Loading chunk")||t.message?.includes("Loading CSS chunk")||t.message?.includes("ChunkLoadError")||"ChunkLoadError"===t.name||t.message?.includes("network error")||t.message?.includes("Failed to fetch dynamically imported module")||t.message?.includes("404")||t.message?.includes("not found");let s=a?"Failed to load component. Please refresh the page.":`Failed to load component: ${t.message}`;const n=new Error(s);throw n.stack=t.stack,n.originalError=e,n.isChunkError=a,n})),p=d.error?n.jsx("div",{className:"flex items-center justify-center min-h-[200px] p-8",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx("div",{className:"text-red-500 text-lg font-semibold mb-2",children:"Failed to load component"}),n.jsx("div",{className:"text-gray-600 text-sm mb-4",children:d.error.message||"An error occurred while loading the component"}),d.error.stack&&n.jsxs("details",{className:"text-left text-xs text-gray-500 mb-4 bg-gray-50 p-2 rounded",children:[n.jsx("summary",{className:"cursor-pointer mb-2",children:"Error Details"}),n.jsx("pre",{className:"whitespace-pre-wrap overflow-auto max-h-40",children:d.error.stack})]}),n.jsx("button",{onClick:m,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Retry"})]})}):t;if(d.error){const e=d.error?.isChunkError||!1;return n.jsx("div",{className:"flex items-center justify-center min-h-[200px] p-8",children:n.jsxs("div",{className:"text-center max-w-lg",children:[n.jsx("div",{className:"text-red-500 text-lg font-semibold mb-2",children:"Failed to load component"}),n.jsx("div",{className:"text-gray-600 text-sm mb-4",children:e?"The page could not be loaded. Please refresh.":d.error.message||"An error occurred while loading the component"}),n.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[n.jsx("button",{onClick:m,className:"px-4 py-2 bg-gray-900 text-white rounded hover:bg-gray-800 transition-colors",children:"Retry"}),n.jsx("button",{onClick:async()=>{if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.getRegistrations();for(const t of e)await t.unregister();if("caches"in window){const e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}}catch(e){}window.location.reload()},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Clear Cache & Reload"})]})]})})}const h=n.jsx("div",{className:"flex items-center justify-center min-h-[200px] p-8",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx("div",{className:"text-red-500 text-lg font-semibold mb-2",children:"Failed to load component"}),n.jsx("div",{className:"text-gray-600 text-sm mb-4",children:"Please try refreshing the page or contact support if the problem persists."}),n.jsxs("div",{className:"flex gap-2 justify-center",children:[n.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-900 text-white rounded hover:bg-gray-800 transition-colors",children:"Refresh Page"}),n.jsx("button",{onClick:async()=>{if("caches"in window){const e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}if("serviceWorker"in navigator){const e=await navigator.serviceWorker.getRegistrations();await Promise.all(e.map(e=>e.unregister()))}window.location.reload()},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Clear Cache & Reload"})]})]})});return n.jsx(j,{fallback:a||h,children:n.jsx(o.Suspense,{fallback:p,children:n.jsx(u,{...c})})})},Y=(e,t={})=>a=>n.jsx(B,{importFn:e,...t,...a}),J={preload:!0,preloadDelay:0,retryCount:5,retryDelay:1e3},G={preload:!0,preloadDelay:1e3,retryCount:3,retryDelay:2e3},K={preload:!0,preloadDelay:2e3,retryCount:2,retryDelay:3e3},X={preload:!1,retryCount:3,retryDelay:2e3},Z=Y(()=>y(()=>import("./pages-ChHhNcds.js").then(e=>e.M),__vite__mapDeps([7,1,0,2,3,4,5,6,8])),J),ee=Y(()=>y(()=>import("./pages-ChHhNcds.js").then(e=>e.A),__vite__mapDeps([7,1,0,2,3,4,5,6,8])),G),te=Y(()=>y(()=>import("./pages-ChHhNcds.js").then(e=>e.a),__vite__mapDeps([7,1,0,2,3,4,5,6,8])),J),ae=Y(()=>y(()=>import("./pages-ChHhNcds.js").then(e=>e.C),__vite__mapDeps([7,1,0,2,3,4,5,6,8])),G),se=Y(()=>y(()=>import("./pages-ChHhNcds.js").then(e=>e.b),__vite__mapDeps([7,1,0,2,3,4,5,6,8])),G),ne=Y(()=>y(()=>import("./pages-ChHhNcds.js").then(e=>e.c),__vite__mapDeps([7,1,0,2,3,4,5,6,8])),G),re=Y(()=>y(()=>import("./pages-ChHhNcds.js").then(e=>e.d),__vite__mapDeps([7,1,0,2,3,4,5,6,8])),G),oe=Y(()=>y(()=>import("./pages-ChHhNcds.js").then(e=>e.S),__vite__mapDeps([7,1,0,2,3,4,5,6,8])),G),ie=Y(()=>y(()=>import("./pages-ChHhNcds.js").then(e=>e.U),__vite__mapDeps([7,1,0,2,3,4,5,6,8])),G),le=Y(()=>y(()=>import("./pages-reports-C6d-v1ok.js"),[]),K),ce=Y(()=>y(()=>import("./pages-businessanalytics-C6d-v1ok.js"),[]),K),de=Y(()=>y(()=>import("./pages-systemmonitor-R69PhKQe.js"),__vite__mapDeps([9,1,2,0,4,5,6,3])),K),me=Y(()=>y(()=>import("./pages-ChHhNcds.js").then(e=>e.e),__vite__mapDeps([7,1,0,2,3,4,5,6,8])),G),ue=Y(()=>y(()=>import("./pages-accounting-nKHpZC0j.js"),__vite__mapDeps([10,1,7,0,2,3,4,5,6,8])),G),pe=Y(()=>y(()=>import("./pages-revenueanalytics-C6d-v1ok.js"),[]),K),he=Y(()=>y(()=>import("./pages-ChHhNcds.js").then(e=>e.T),__vite__mapDeps([7,1,0,2,3,4,5,6,8])),G),ge=Y(()=>y(()=>import("./pages-ChHhNcds.js").then(e=>e.F),__vite__mapDeps([7,1,0,2,3,4,5,6,8])),X),_e=Y(()=>y(()=>import("./pages-ChHhNcds.js").then(e=>e.f),__vite__mapDeps([7,1,0,2,3,4,5,6,8])),G),ye=Y(()=>y(()=>import("./TabShowcase-Da8iRdt4.js"),__vite__mapDeps([11,1,4,5,0,2,3,6])),X),fe=Y(()=>y(()=>import("./pages-ChHhNcds.js").then(e=>e.O),__vite__mapDeps([7,1,0,2,3,4,5,6,8])),G),ve=Y(()=>y(()=>import("./pages-ChHhNcds.js").then(e=>e.g),__vite__mapDeps([7,1,0,2,3,4,5,6,8])),G);function xe(){return(()=>{const e=s();o.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[e.pathname]),o.useEffect(()=>{window.scrollTo(0,0)},[])})(),o.useEffect(()=>{const e=setTimeout(async()=>{await(async()=>{const e=performance.now();try{await Promise.all([y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.r),__vite__mapDeps([0,1,2,3,4,5,6])),y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.p),__vite__mapDeps([0,1,2,3,4,5,6])),y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.q),__vite__mapDeps([0,1,2,3,4,5,6]))]),await Promise.all([y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.R),__vite__mapDeps([0,1,2,3,4,5,6])),y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.D),__vite__mapDeps([0,1,2,3,4,5,6])),y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.G),__vite__mapDeps([0,1,2,3,4,5,6]))]),await Promise.all([y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.N),__vite__mapDeps([0,1,2,3,4,5,6])),y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.s),__vite__mapDeps([0,1,2,3,4,5,6])),y(()=>import("./components-modern-C3CPxipx.js").then(e=>e.S),__vite__mapDeps([0,1,2,3,4,5,6]))]);const t=performance.now()-e;H.recordMetrics("preloadComponents",{loadTime:t,preloadSuccess:!0,cacheHit:!1,retryCount:0,errorRate:0})}catch(t){const a=performance.now()-e;H.recordMetrics("preloadComponents",{loadTime:a,preloadSuccess:!1,cacheHit:!1,retryCount:0,errorRate:1})}})(),H.preloadBasedOnPatterns()},1e3);return U.setupLazyImages(),()=>{clearTimeout(e),U.cleanup(),H.cleanup()}},[]),n.jsxs(l,{store:F,children:[n.jsx(c,{attribute:"class",defaultTheme:"light",enableSystem:!0,disableTransitionOnChange:!1,children:n.jsx(d,{value:M,children:n.jsx(j,{children:n.jsx(E,{children:n.jsx(k,{children:n.jsx(T,{children:n.jsx(R,{children:n.jsxs(P,{position:"top-right",maxVisible:5,children:[n.jsx($,{}),n.jsx(W,{}),n.jsx(A,{}),n.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 transition-colors duration-200",children:n.jsx(o.Suspense,{fallback:n.jsx(x,{}),children:n.jsxs(m,{children:[n.jsx(u,{path:"/login",element:n.jsx(te,{})}),n.jsxs(u,{path:"/",element:n.jsx(z,{children:n.jsx(v,{})}),children:[n.jsx(u,{index:!0,element:n.jsx(Z,{})}),n.jsx(u,{path:"dashboard",element:n.jsx(Z,{})}),n.jsx(u,{path:"clients",element:n.jsx(ae,{})}),n.jsx(u,{path:"clients/:clientName",element:n.jsx(se,{})}),n.jsx(u,{path:"accounting",element:n.jsx(ue,{})}),n.jsx(u,{path:"finance/accounting",element:n.jsx(ue,{})}),n.jsx(u,{path:"trust",element:n.jsx(he,{})}),n.jsx(u,{path:"psp",element:n.jsx(re,{})}),n.jsx(u,{path:"ledger",element:n.jsx(r,{to:"/psp",replace:!0})}),n.jsx(u,{path:"transactions/add",element:n.jsx(me,{})}),n.jsx(u,{path:"transactions/clients",element:n.jsx(r,{to:"/clients",replace:!0})}),n.jsx(u,{path:"agents",element:n.jsx(ne,{})}),n.jsx(u,{path:"analytics",element:n.jsx(ee,{})}),n.jsx(u,{path:"revenue-analytics",element:n.jsx(pe,{})}),n.jsx(u,{path:"ai",element:n.jsx(ge,{})}),n.jsx(u,{path:"future",element:n.jsx(r,{to:"/ai",replace:!0})}),n.jsx(u,{path:"tab-showcase",element:n.jsx(ye,{})}),n.jsx(u,{path:"settings",element:n.jsx(oe,{})}),n.jsx(u,{path:"reports",element:n.jsx(le,{})}),n.jsx(u,{path:"business-analytics",element:n.jsx(ce,{})}),n.jsx(u,{path:"system-monitor",element:n.jsx(de,{})}),n.jsx(u,{path:"/",element:n.jsx(r,{to:"/dashboard",replace:!0})}),n.jsx(u,{path:"admin",element:n.jsx(r,{to:"/admin/settings",replace:!0})}),n.jsx(u,{path:"admin/organizations",element:n.jsx(fe,{})}),n.jsx(u,{path:"admin/users",element:n.jsx(ve,{})}),n.jsx(u,{path:"admin/user-management",element:n.jsx(ie,{})}),n.jsx(u,{path:"admin/settings",element:n.jsx(_e,{})}),n.jsx(u,{path:"admin/permissions",element:n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Permissions"}),n.jsx("p",{children:"Permissions management coming soon..."})]})}),n.jsx(u,{path:"admin/monitoring",element:n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"System Monitoring"}),n.jsx("p",{children:"System monitoring features coming soon..."})]})}),n.jsx(u,{path:"admin/database",element:n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Database Management"}),n.jsx("p",{children:"Database management features coming soon..."})]})}),n.jsx(u,{path:"admin/backup",element:n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Backup & Restore"}),n.jsx("p",{children:"Backup and restore features coming soon..."})]})}),n.jsx(u,{path:"admin/security",element:n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Security Settings"}),n.jsx("p",{children:"Security settings coming soon..."})]})}),n.jsx(u,{path:"admin/logs",element:n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"System Logs"}),n.jsx("p",{children:"System logs viewer coming soon..."})]})})]})]})})})]})})})})})})})}),!1]})}const je=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function we(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?t&&t.onUpdate&&t.onUpdate(e):t&&t.onSuccess&&t.onSuccess(e))})}}).catch(e=>{})}if("undefined"!=typeof window&&"localhost"===window.location.hostname&&"3000"===window.location.port){const e=window.location.pathname,t=window.location.search,a=window.location.hash,s=`${window.location.protocol}//${window.location.hostname}${e}${t}${a}`;window.location.replace(s)}const be=document.getElementById("root");if(!be)throw new Error('Root element not found! Check index.html for <div id="root"></div>');window.addEventListener("error",e=>{be.hasChildNodes()||(be.innerHTML=`\n      <div style="padding: 2rem; font-family: system-ui; max-width: 800px; margin: 0 auto;">\n        <h1 style="color: #dc2626;">Application Error</h1>\n        <p style="color: #6b7280;">An error occurred while loading the application.</p>\n        <pre style="background: #f3f4f6; padding: 1rem; border-radius: 0.5rem; overflow: auto;">\n          ${e.error?.message||"Unknown error"}\n          ${e.error?.stack||""}\n        </pre>\n        <button onclick="window.location.reload()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #2563eb; color: white; border: none; border-radius: 0.25rem; cursor: pointer;">\n          Reload Page\n        </button>\n      </div>\n    `)}),window.addEventListener("unhandledrejection",e=>{const t=e.reason;t?.message?.includes&&t.message.includes("Failed to fetch")||t?.message?.includes&&t.message.includes("Loading chunk")||t?.message?.includes&&t.message.includes("ChunkLoadError")||"ChunkLoadError"===t?.name||t?.message?.includes&&t.message.includes("Failed to fetch dynamically imported module")}),p.createRoot(be).render(n.jsx(h.StrictMode,{children:n.jsx(d,{value:{...M,fetcher:async e=>{const t=await fetch(e,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()}},children:n.jsx(g,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:n.jsx(xe,{})})})})),setTimeout(()=>{0===be.children.length&&(be.innerHTML='\n      <div style="padding: 2rem; font-family: system-ui; max-width: 800px; margin: 0 auto; background: white; min-height: 100vh;">\n        <h1 style="color: #dc2626;">⚠️ Render Issue Detected</h1>\n        <p style="color: #6b7280;">React app rendered but root element is empty.</p>\n        <p style="color: #6b7280;">Check browser console for errors.</p>\n        <button onclick="window.location.reload()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #2563eb; color: white; border: none; border-radius: 0.25rem; cursor: pointer;">\n          Reload Page\n        </button>\n      </div>\n    ')},1e3),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(e=>{e.forEach(e=>{})}),function(e){if("serviceWorker"in navigator){if(new URL("/",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="/sw.js";je?(function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(a=>{const s=a.headers.get("content-type");404===a.status||null!=s&&-1===s.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):we(e,t)}).catch(()=>{})}(t,e),navigator.serviceWorker.ready.then(()=>{})):we(t,e)})}}({onSuccess:()=>{},onUpdate:()=>{}});
