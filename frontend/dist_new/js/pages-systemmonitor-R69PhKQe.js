import{r as e,j as s,h as a,a0 as t,a1 as i,o as r,f as n,ac as l,T as c,bn as m,p as d,aS as o,bo as x,k as h,b8 as g,c as p,C as y}from"./vendor-react-OTlZW24_.js";import{b as j}from"./contexts-ClDLaFbv.js";import{P as u,d as N,b,U as f}from"./components-modern-C3CPxipx.js";import{e as v}from"./components-ui-CpjZxCxu.js";import"./vendor-i18n-DHLiip7K.js";import"./vendor-utils-CtF19A-_.js";import"./vendor-charts-recharts-DLiVWtHJ.js";const _=()=>{const{t:_}=j(),[w,k]=e.useState(null),[z,S]=e.useState([]),[C,D]=e.useState(null),[O,A]=e.useState(!0),[P,$]=e.useState(!0),[R,U]=e.useState(30),[F,M]=e.useState(!1),[L,I]=e.useState(null),[E,T]=e.useState(!1),[q,H]=e.useState([]),[B,J]=e.useState(null),[G,K]=e.useState(null);e.useEffect(()=>{if(Q(),P){const e=setInterval(Q,1e3*R);return()=>clearInterval(e)}return()=>{}},[P,R]);const Q=async()=>{try{A(!0);const e=await fetch("/api/v1/performance/status");if(e.ok){const s=await e.json();J(s);const a={cpu_usage:"number"!=typeof s.system?.cpu_percent||isNaN(s.system.cpu_percent)?0:s.system.cpu_percent,memory_usage:"number"!=typeof s.system?.memory_percent||isNaN(s.system.memory_percent)?0:s.system.memory_percent,disk_usage:"number"!=typeof s.system?.disk_percent||isNaN(s.system.disk_percent)?0:s.system.disk_percent,database_connections:"number"!=typeof s.database_pool?.checked_out||isNaN(s.database_pool.checked_out)?0:s.database_pool.checked_out,cache_hit_rate:"number"!=typeof s.cache?.hit_rate||isNaN(s.cache.hit_rate)?s.cache?.hits&&s.cache?.misses?s.cache.hits/(s.cache.hits+s.cache.misses)*100:0:s.cache.hit_rate,response_time:"number"!=typeof s.cache?.avg_response_time||isNaN(s.cache.avg_response_time)?0:s.cache.avg_response_time,requests_per_second:"number"!=typeof s.cache?.requests_per_second||isNaN(s.cache.requests_per_second)?0:s.cache.requests_per_second,error_rate:"number"!=typeof s.cache?.error_rate||isNaN(s.cache.error_rate)?0:s.cache.error_rate,uptime:"number"==typeof s.timestamp?Math.floor(Date.now()/1e3-s.timestamp):0,last_update:s.timestamp?new Date(1e3*s.timestamp).toISOString():(new Date).toISOString(),system:s.system,cache:s.cache,database_pool:s.database_pool,database:s.database};k(a)}const s=await fetch("/api/v1/performance/system-status");if(s.ok){const e=await s.json(),a={overall:e.overall||"unknown",database:e.database||"unknown",cache:e.cache||"unknown",api:e.api||"unknown",background_tasks:e.background_tasks||"unknown"};D(a)}const a=await fetch("/api/v1/performance/alerts");if(a.ok){const e=await a.json(),s=Array.isArray(e)?e:e.alerts||[];S(s)}}catch(e){}finally{A(!1)}},V=async()=>{try{T(!0);const e={timestamp:(new Date).toISOString(),status:"running",message:"Database optimization in progress..."};H(s=>[e,...s.slice(0,9)]);const s=await fetch("/api/v1/performance/database-optimization");if(!s.ok)throw new Error("Failed to run optimization");{const e=await s.json();I(e),H(s=>[{timestamp:(new Date).toISOString(),status:"success",message:`Optimization completed successfully! Found ${e.total} recommendations.`,details:e},...s.slice(0,9)]);const a=e.recommendations.map(e=>({id:`db_opt_${Date.now()}_${Math.random()}`,type:e.type,message:e.message,timestamp:(new Date).toISOString(),severity:e.priority,resolved:!1,recommendations:e.details?.general_tips||[],details:e.details}));S(e=>[...e,...a])}}catch(e){H(s=>[{timestamp:(new Date).toISOString(),status:"error",message:"Database optimization failed. Please check the logs.",details:{error:e instanceof Error?e.message:"Unknown error"}},...s.slice(0,9)])}finally{T(!1)}},W=e=>{switch((e||"").toLowerCase()){case"healthy":return"success";case"warning":return"warning";case"error":case"critical":return"destructive";default:return"secondary"}},X=e=>{if(!e)return"border-l-gray-500 bg-gray-50";switch(e.toLowerCase()){case"low":default:return"border-l-gray-500 bg-gray-50";case"medium":return"border-l-gray-600 bg-gray-50";case"high":return"border-l-gray-700 bg-gray-50";case"critical":return"border-l-gray-900 bg-gray-50"}},Y=e=>e>80?"bg-gray-900":e>60?"bg-gray-700":"bg-gray-500";return s.jsx(s.Fragment,{children:s.jsx(u,{theme:"plain",minHeightScreen:!1,children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx(v,{title:_("navigation.system_monitor","System Monitor"),description:_("navigation.realtime_system_monitoring","Real-time system performance and health monitoring"),icon:a,actions:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(N,{variant:"outline",size:"sm",onClick:async()=>{try{const e={timestamp:(new Date).toISOString(),system_status:C,metrics:B||w,alerts:z,database_optimization:L,optimization_history:q},s=JSON.stringify(e,null,2);await navigator.clipboard.writeText(s),M(!0),setTimeout(()=>M(!1),2e3)}catch(e){}},icon:F?s.jsx(t,{className:"w-4 h-4"}):s.jsx(i,{className:"w-4 h-4"}),iconPosition:"left",children:F?_("common.copied","Copied"):_("system_monitor.copy_diagnostics","Copy Diagnostics")}),s.jsx(N,{variant:"outline",size:"sm",onClick:Q,disabled:O,icon:s.jsx(r,{className:"w-4 h-4 "+(O?"animate-spin":"")}),iconPosition:"left",children:O?_("common.refreshing","Refreshing"):_("common.refresh","Refresh")}),s.jsx(N,{variant:"primary",size:"sm",onClick:V,disabled:E,icon:s.jsx(n,{className:"w-4 h-4"}),iconPosition:"left",children:E?_("system_monitor.optimizing","Optimizing"):_("system_monitor.run_db_optimization","Run DB Optimization")}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700",children:[s.jsx("input",{type:"checkbox",checked:P,onChange:e=>$(e.target.checked),className:"rounded border-gray-300 text-gray-700 focus:ring-gray-500"}),_("system_monitor.auto_refresh","Auto-refresh")]}),P&&s.jsxs("select",{value:R,onChange:e=>U(Number(e.target.value)),className:"text-sm border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-gray-500 bg-white",children:[s.jsx("option",{value:15,children:_("system_monitor.refresh_interval_15s","15s")}),s.jsx("option",{value:30,children:_("system_monitor.refresh_interval_30s","30s")}),s.jsx("option",{value:60,children:_("system_monitor.refresh_interval_1m","1m")}),s.jsx("option",{value:300,children:_("system_monitor.refresh_interval_5m","5m")})]})]})]})}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"text-gray-500",children:[_("system_monitor.last_updated","Last updated"),": ",w?.last_update||_("system_monitor.never","Never")]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(l,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-500",children:"DB Status:"}),L?E?s.jsx(b,{variant:"warning",size:"sm",children:_("system_monitor.optimizing","Optimizing")}):s.jsxs(b,{variant:"success",size:"sm",children:[_("system_monitor.optimized","Optimized")," (",L.total,")"]}):s.jsx(b,{variant:"secondary",size:"sm",children:_("system_monitor.not_analyzed","Not Analyzed")})]}),L&&s.jsxs("div",{className:"text-xs text-gray-400",children:[_("system_monitor.last_run","Last run"),": ",new Date(L.timestamp).toLocaleTimeString()]})]})]})]}),O&&s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:_("system_monitor.loading_system_data","Loading system data...")})]}),!O&&!w&&!C&&s.jsxs(f,{variant:"elevated",className:"p-6 text-center",children:[s.jsx("div",{className:"text-red-600 mb-3",children:s.jsx(c,{className:"w-12 h-12 mx-auto"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load system data"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to fetch system metrics and status information."}),s.jsx(N,{variant:"outline",size:"sm",onClick:Q,children:"Retry"})]}),!O&&C&&s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-6",children:[s.jsx(f,{variant:"flat",padding:"sm",className:"border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Overall"}),s.jsx("div",{className:"mt-1",children:s.jsx(b,{variant:W(C.overall),size:"sm",children:(C.overall||"unknown").charAt(0).toUpperCase()+(C.overall||"unknown").slice(1)})})]}),s.jsx("div",{className:"shrink-0",children:(e=>{if(!e)return s.jsx(y,{className:"w-5 h-5 text-gray-600"});switch(e.toLowerCase()){case"healthy":return s.jsx(p,{className:"w-5 h-5 text-gray-700"});case"warning":case"error":return s.jsx(c,{className:"w-5 h-5 text-gray-700"});case"critical":return s.jsx(c,{className:"w-5 h-5 text-gray-900"});default:return s.jsx(y,{className:"w-5 h-5 text-gray-600"})}})(C.overall)})]})}),s.jsx(f,{variant:"flat",padding:"sm",className:"border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Database"}),s.jsx("div",{className:"mt-1",children:s.jsx(b,{variant:W(C.database),size:"sm",children:(C.database||"unknown").charAt(0).toUpperCase()+(C.database||"unknown").slice(1)})})]}),s.jsx(l,{className:"w-5 h-5 text-gray-600 shrink-0"})]})}),s.jsx(f,{variant:"flat",padding:"sm",className:"border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-xs font-medium text-gray-500",children:"DB Optimization"}),s.jsx("div",{className:"mt-1",children:L?E?s.jsx(b,{variant:"warning",size:"sm",children:"Running"}):s.jsx(b,{variant:"success",size:"sm",children:L.total}):s.jsx(b,{variant:"secondary",size:"sm",children:"Not Analyzed"})})]}),s.jsx(n,{className:"w-5 h-5 text-gray-600 shrink-0"})]})}),s.jsx(f,{variant:"flat",padding:"sm",className:"border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Cache"}),s.jsx("div",{className:"mt-1",children:s.jsx(b,{variant:W(C.cache),size:"sm",children:(C.cache||"unknown").charAt(0).toUpperCase()+(C.cache||"unknown").slice(1)})})]}),s.jsx(m,{className:"w-5 h-5 text-gray-600 shrink-0"})]})}),s.jsx(f,{variant:"flat",padding:"sm",className:"border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Background"}),s.jsx("div",{className:"mt-1",children:s.jsx(b,{variant:W(C.background_tasks),size:"sm",children:(C.background_tasks||"unknown").charAt(0).toUpperCase()+(C.background_tasks||"unknown").slice(1)})})]}),s.jsx(d,{className:"w-5 h-5 text-gray-600 shrink-0"})]})})]}),!O&&C&&s.jsxs(f,{variant:"elevated",className:"p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(o,{className:"w-5 h-5 text-gray-600"}),"API Health"]}),s.jsx(b,{variant:W(C.api),size:"sm",children:(C.api||"unknown").charAt(0).toUpperCase()+(C.api||"unknown").slice(1)})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Current API health status from the system monitor endpoint."})]}),!O&&w&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[s.jsxs(f,{variant:"elevated",className:"p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(x,{className:"w-5 h-5 text-gray-600"}),"System Resources"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"CPU Usage"}),s.jsxs("span",{className:"font-medium",children:[(w.cpu_usage??0).toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${Y(w.cpu_usage??0)}`,style:{width:`${Math.min(w.cpu_usage??0,100)}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Memory Usage"}),s.jsxs("span",{className:"font-medium",children:[(w.memory_usage??0).toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${Y(w.memory_usage??0)}`,style:{width:`${Math.min(w.memory_usage??0,100)}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Disk Usage"}),s.jsxs("span",{className:"font-medium",children:[(w.disk_usage??0).toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${Y(w.disk_usage??0)}`,style:{width:`${Math.min(w.disk_usage??0,100)}%`}})})]})]})]}),s.jsxs(f,{variant:"elevated",className:"p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(h,{className:"w-5 h-5 text-gray-600"}),"Application Performance"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[s.jsxs("p",{className:"text-2xl font-bold text-gray-600",children:[(w.response_time??0).toFixed(2),"ms"]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Response Time"})]}),s.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(w.requests_per_second??0).toFixed(1)}),s.jsx("p",{className:"text-sm text-gray-600",children:"Requests/sec"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.database_connections??0}),s.jsx("p",{className:"text-sm text-gray-600",children:"DB Connections"})]}),s.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(w.cache_hit_rate??0).toFixed(1),"%"]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Cache Hit Rate"})]})]}),s.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(w.error_rate??0).toFixed(2),"%"]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Error Rate"})]})]})]})]}),!O&&w&&(w.cache||w.database_pool)&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[w.cache&&s.jsxs(f,{variant:"elevated",className:"p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(g,{className:"w-5 h-5 text-gray-600"}),"Redis Cache",s.jsx(b,{variant:w.cache.redis_available?"success":"warning",size:"sm",children:w.cache.redis_available?"Available":"Memory Cache"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Hit Rate"}),s.jsxs("span",{className:"font-medium",children:[(w.cache.hit_rate??0).toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full "+(Z=w.cache.hit_rate??0,Z>70?"bg-gray-700":Z>50?"bg-gray-600":"bg-gray-500"),style:{width:`${Math.min(w.cache.hit_rate??0,100)}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.cache.hits??0}),s.jsx("p",{className:"text-sm text-gray-600",children:"Cache Hits"})]}),s.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.cache.misses??0}),s.jsx("p",{className:"text-sm text-gray-600",children:"Cache Misses"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(w.cache.avg_response_time??0).toFixed(2),"ms"]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Avg Response"})]}),s.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.cache.memory_cache_entries??0}),s.jsx("p",{className:"text-sm text-gray-600",children:"Memory Entries"})]})]}),!w.cache.redis_available&&s.jsx("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx(c,{className:"w-4 h-4 inline mr-2"}),_("system_monitor.redis_unavailable_message","Redis is not available. Using in-memory cache (not persistent across restarts).")]})})]})]}),w.database_pool&&s.jsxs(f,{variant:"elevated",className:"p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(l,{className:"w-5 h-5 text-gray-600"}),"Database Connection Pool"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Pool Usage"}),s.jsxs("span",{className:"font-medium",children:[w.database_pool.checked_out??0," / ",w.database_pool.size??0,w.database_pool.size>0&&` (${(w.database_pool.checked_out/w.database_pool.size*100).toFixed(1)}%)`]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${Y(w.database_pool.size>0?w.database_pool.checked_out/w.database_pool.size*100:0)}`,style:{width:`${w.database_pool.size>0?Math.min(w.database_pool.checked_out/w.database_pool.size*100,100):0}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.database_pool.checked_out??0}),s.jsx("p",{className:"text-sm text-gray-600",children:"Active Connections"})]}),s.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.database_pool.size??0}),s.jsx("p",{className:"text-sm text-gray-600",children:"Pool Size"})]})]}),s.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.database_pool.overflow??0}),s.jsx("p",{className:"text-sm text-gray-600",children:"Overflow Connections"}),w.database_pool.overflow>0&&s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[s.jsx(c,{className:"w-3 h-3 inline mr-1"}),"Pool exhausted, using overflow connections"]})]}),w.database_pool.size>0&&w.database_pool.checked_out/w.database_pool.size*100>80&&s.jsx("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx(c,{className:"w-4 h-4 inline mr-2"}),"High pool usage detected. Consider increasing pool size or optimizing connection usage."]})})]})]})]}),!O&&s.jsxs(f,{variant:"elevated",className:"p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(l,{className:"w-5 h-5 text-gray-600"}),"Database Optimization"]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(N,{variant:"primary",size:"sm",onClick:V,disabled:E,icon:s.jsx(n,{className:"w-4 h-4"}),iconPosition:"left",children:E?"Optimizing":"Run Optimization"})})]}),L?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(p,{className:"w-5 h-5 text-gray-600"}),s.jsx("span",{className:"font-medium text-gray-800",children:"Optimization Analysis Complete"})]}),s.jsxs("p",{className:"text-sm text-gray-700",children:["Found ",L.total," optimization opportunities. Last run: ",new Date(L.timestamp).toLocaleString()]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:L.recommendations.map((e,a)=>s.jsx("div",{className:"border border-gray-200 bg-gray-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-2 h-2 rounded-full mt-2 bg-gray-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:e.message}),e.details?.index&&e.details?.columns&&s.jsx(N,{variant:"outline",size:"sm",onClick:()=>(async e=>{if(e.details?.table&&e.details?.index&&e.details?.columns)try{K(e.details.index);const s=await fetch("/api/v1/performance/database-optimization/create-index",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({table:e.details.table,index:e.details.index,columns:e.details.columns})}),a=await s.json();if(!s.ok||!a.success)throw new Error(a.message||_("system_monitor.failed_to_create_index"));await V(),alert(_("system_monitor.index_created_success",{index:e.details.index}))}catch(s){alert(`${_("system_monitor.failed_to_create_index")}: ${s instanceof Error?s.message:_("system_monitor.unknown")}`)}finally{K(null)}})(e),disabled:G===e.details.index,icon:G===e.details.index?s.jsx(r,{className:"w-3 h-3 animate-spin"}):s.jsx(l,{className:"w-3 h-3"}),iconPosition:"left",children:G===e.details.index?_("system_monitor.creating"):_("system_monitor.create_index")})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.action}),e.details?.table&&s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[s.jsx("span",{className:"font-medium",children:_("system_monitor.table")})," ",e.details.table,e.details.row_count&&s.jsxs("span",{className:"ml-2",children:["(",e.details.row_count.toLocaleString()," ",_("system_monitor.rows"),")"]})]}),e.details?.suggestions&&e.details.suggestions.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:_("system_monitor.suggestions")}),s.jsx("ul",{className:"text-xs text-gray-600 space-y-1",children:e.details.suggestions.map((e,a)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-gray-500 mt-1",children:"•"}),s.jsx("code",{className:"text-xs bg-gray-100 px-1 rounded",children:e})]},a))})]}),e.details?.general_tips&&e.details.general_tips.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:_("system_monitor.best_practices")}),s.jsx("ul",{className:"text-xs text-gray-600 space-y-1",children:e.details.general_tips.map((e,a)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-gray-500 mt-1",children:"•"}),e]},a))})]})]})]})},a))})]}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(l,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),s.jsx("p",{className:"text-lg font-medium mb-2",children:"No optimization data yet"}),s.jsx("p",{className:"text-sm",children:'Click "Run Optimization" to analyze your database performance'})]})]}),!O&&s.jsxs(f,{variant:"elevated",className:"p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(c,{className:"w-5 h-5 text-gray-600"}),_("system_monitor.performance_alerts")]}),0===z.length?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(p,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{children:_("system_monitor.no_active_alerts")})]}):s.jsx("div",{className:"space-y-3",children:z.map(e=>s.jsx("div",{className:`p-4 rounded-lg border-l-4 ${X(e.severity)}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(b,{variant:"secondary",size:"sm",children:(e.severity||"low").toUpperCase()}),s.jsx("span",{className:"text-sm text-gray-500",children:e.timestamp||"Unknown"})]}),s.jsx("p",{className:"text-gray-900 font-medium mb-2",children:e.message||"No message"}),e.recommendations&&Array.isArray(e.recommendations)&&s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:_("system_monitor.recommendations")}),s.jsx("ul",{className:"space-y-1",children:e.recommendations.map((e,a)=>s.jsxs("li",{className:"text-sm text-gray-600 flex items-start gap-2",children:[s.jsx("span",{className:"text-gray-500 mt-1",children:"•"}),s.jsx("span",{children:e})]},a))})]}),e.details&&s.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:_("system_monitor.details")}),e.details.table&&s.jsxs("p",{className:"text-sm text-gray-600",children:[_("system_monitor.table")," ",s.jsx("span",{className:"font-medium",children:e.details.table})]}),e.details.row_count&&s.jsxs("p",{className:"text-sm text-gray-600",children:[_("system_monitor.rows"),": ",s.jsx("span",{className:"font-medium",children:e.details.row_count.toLocaleString()})]}),e.details.suggestions&&Array.isArray(e.details.suggestions)&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:_("system_monitor.specific_actions")}),s.jsx("ul",{className:"space-y-1",children:e.details.suggestions.map((e,a)=>s.jsxs("li",{className:"text-sm text-gray-600 flex items-start gap-2",children:[s.jsx("span",{className:"text-gray-500 mt-1",children:"→"}),s.jsx("span",{children:e})]},a))})]})]})]}),s.jsx("button",{onClick:()=>{S(z.filter(s=>s.id!==e.id))},className:"text-gray-400 hover:text-gray-600 ml-4",title:_("system_monitor.dismiss_alert"),children:"×"})]})},e.id))})]}),!O&&s.jsxs(f,{variant:"elevated",className:"p-6 mt-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(n,{className:"w-5 h-5 text-gray-600"}),_("system_monitor.database_optimization_history")]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:_("system_monitor.timestamp")}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:_("system_monitor.status")}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:_("system_monitor.message")}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:_("system_monitor.details")})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map((e,a)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.timestamp).toLocaleString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.jsx(b,{variant:"secondary",size:"sm",children:e.status.toUpperCase()})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.message}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.details&&s.jsx("button",{onClick:()=>{H(q.map((e,s)=>s===a?{...e,details:null}:e))},className:"text-gray-600 hover:underline text-xs",children:_("system_monitor.view_details")})})]},a))})]})})]}),!O&&s.jsxs(f,{variant:"elevated",className:"p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(o,{className:"w-5 h-5 text-gray-600"}),_("system_monitor.system_information")]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:_("system_monitor.uptime")}),s.jsx("p",{className:"font-medium",children:w?.uptime?`${Math.floor(w.uptime/3600)}h ${Math.floor(w.uptime%3600/60)}m`:_("system_monitor.unknown")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:_("system_monitor.last_update")}),s.jsx("p",{className:"font-medium",children:w?.last_update||_("system_monitor.never")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:_("system_monitor.environment")}),s.jsx("p",{className:"font-medium",children:"Production"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:_("system_monitor.version")}),s.jsx("p",{className:"font-medium",children:"PipLinePro v2.0"})]})]})]})]})})});var Z};export{_ as default};
