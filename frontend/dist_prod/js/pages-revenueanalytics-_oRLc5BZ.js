import{u as e,r as s,j as t,o as a,X as l,Y as r,k as i,b7 as n,f as c,m as d,z as o,d as x,S as m,aN as h,D as j,i as p,p as u,v as f,U as y,aQ as g,B as v}from"./vendor-react-BhTnfaj4.js";import{u as N}from"./pages-B3fV5jk5.js";import{a as w}from"./contexts-BJ30luUC.js";import{B as b,l as k,m as C,n as _,o as S,p as F,I as D,C as L,a as A,q as O,r as E,s as R,t as B,d as T,f as G,g as P,b as W}from"./components-ui-DqTPGewb.js";import{R as U,B as $,b as z,X as K,Y as I,T as V,d as Y,P as M,a as q,C as H}from"./vendor-charts-recharts-B9ou1qfH.js";import"./components-modern-tUvpuNx5.js";import"./vendor-utils-CtF19A-_.js";import"./components-trust-Cyz_q_DS.js";import"./vendor-i18n-DHLiip7K.js";function Q(){const{t:Q}=w(),X=e(),[J,Z]=s.useState(null),[ee,se]=s.useState(!0),[te,ae]=s.useState(null),[le,re]=s.useState(!1),[ie,ne]=N("overview"),[ce,de]=s.useState("all"),[oe,xe]=s.useState(""),[me,he]=s.useState(!1),[je,pe]=s.useState("all"),[ue,fe]=s.useState("all"),[ye,ge]=s.useState("all"),[ve,Ne]=s.useState(!0),[we,be]=s.useState(3e4),ke=s.useCallback(async()=>{try{se(!0),re(!0),ae(null);const e=await fetch(`/api/v1/analytics/revenue-detailed?range=${ce}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(e.ok){const s=await e.json();Z(s)}else 401===e.status?ae("Authentication required. Please log in."):ae("Failed to fetch revenue analytics data")}catch(e){ae("Failed to connect to server")}finally{se(!1),re(!1)}},[ce]);s.useEffect(()=>{ke()},[ke]),s.useEffect(()=>{let e;return ve&&(e=setInterval(()=>{ke()},we)),()=>{e&&clearInterval(e)}},[ve,we,ke]);const Ce=s.useCallback(()=>{ke()},[ke]),_e=s.useCallback(()=>{Ne(e=>!e)},[]),Se=s.useCallback(e=>{const s=1e3*parseInt(e);be(s)},[]),Fe=s.useCallback(()=>{X("/dashboard")},[X]),De=s.useCallback((e,s="₺")=>{try{return new Intl.NumberFormat("en-US",{style:"currency",currency:"₺"===s?"TRY":s,minimumFractionDigits:0,maximumFractionDigits:0}).format(e).replace(/TRY/g,"₺").replace(/USD/g,"$").replace(/EUR/g,"€").replace(/GBP/g,"£")}catch(t){return`${s}${e.toLocaleString()}`}},[]),Le=s.useCallback(e=>new Intl.NumberFormat("en-US").format(e),[]);s.useMemo(()=>{if(!J)return null;let e={...J};return"all"!==je&&(e.top_clients=e.top_clients.filter(e=>e.client_name.toLowerCase().includes(je.toLowerCase()))),"all"!==ue&&(e.psp_breakdown=e.psp_breakdown.filter(e=>e.psp.toLowerCase().includes(ue.toLowerCase()))),"all"!==ye&&(e.category_breakdown=e.category_breakdown.filter(e=>e.category.toLowerCase().includes(ye.toLowerCase()))),e},[J,je,ue,ye]);const Ae=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f97316"];return ee?t.jsx(ContentArea,{spacing:"xl",children:t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx(a,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),t.jsx("p",{className:"text-gray-600",children:"Loading revenue analytics..."})]})})}):te?t.jsx(ContentArea,{spacing:"xl",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(l,{className:"h-8 w-8 text-red-600"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Data"}),t.jsx("p",{className:"text-gray-600 mb-6",children:te}),t.jsxs(b,{onClick:Ce,variant:"outline",children:[t.jsx(a,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})}):J?t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[t.jsx(i,{className:"h-8 w-8 text-gray-600"}),"Revenue Analytics"]}),t.jsx("p",{className:"text-gray-600",children:"Comprehensive revenue analysis with all transaction data"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs(b,{onClick:Fe,variant:"outline",className:"flex items-center gap-2",children:[t.jsx(n,{className:"h-4 w-4"}),"Back to Dashboard"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(b,{onClick:Ce,disabled:le,variant:"secondary",children:[t.jsx(a,{className:"h-4 w-4 mr-2 "+(le?"animate-spin":"")}),le?"Refreshing...":"Refresh"]}),t.jsxs("div",{className:"flex items-center gap-2 pl-4 border-l border-gray-200",children:[t.jsxs(b,{onClick:_e,variant:ve?"primary":"outline",size:"sm",children:[t.jsx(c,{className:"h-4 w-4 mr-2"}),"Auto Refresh"]}),ve&&t.jsxs(k,{value:(we/1e3).toString(),onValueChange:Se,children:[t.jsx(C,{className:"w-24",children:t.jsx(_,{})}),t.jsxs(S,{children:[t.jsx(F,{value:"10",children:"10s"}),t.jsx(F,{value:"30",children:"30s"}),t.jsx(F,{value:"60",children:"1m"}),t.jsx(F,{value:"300",children:"5m"}),t.jsx(F,{value:"600",children:"10m"})]})]})]})]})]})]})}),t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters & Controls"}),t.jsxs(b,{onClick:()=>he(!me),variant:"ghost",size:"sm",children:[t.jsx(d,{className:"h-4 w-4 mr-2"}),me?"Hide Filters":"Show Filters",me?t.jsx(o,{className:"h-4 w-4 ml-2"}):t.jsx(x,{className:"h-4 w-4 ml-2"})]})]}),me&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Time Range"}),t.jsxs(k,{value:ce,onValueChange:de,children:[t.jsx(C,{children:t.jsx(_,{})}),t.jsxs(S,{children:[t.jsx(F,{value:"all",children:"All Time"}),t.jsx(F,{value:"7d",children:"Last 7 Days"}),t.jsx(F,{value:"30d",children:"Last 30 Days"}),t.jsx(F,{value:"90d",children:"Last 90 Days"}),t.jsx(F,{value:"1y",children:"Last Year"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Search"}),t.jsxs("div",{className:"relative",children:[t.jsx(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx(D,{placeholder:"Search clients, PSPs...",value:oe,onChange:e=>xe(e.target.value),className:"pl-10"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Client"}),t.jsxs(k,{value:je,onValueChange:pe,children:[t.jsx(C,{children:t.jsx(_,{})}),t.jsxs(S,{children:[t.jsx(F,{value:"all",children:"All Clients"}),J?.top_clients?.map((e,s)=>t.jsx(F,{value:e.client_name,children:e.client_name},s))]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"PSP"}),t.jsxs(k,{value:ue,onValueChange:fe,children:[t.jsx(C,{children:t.jsx(_,{})}),t.jsxs(S,{children:[t.jsx(F,{value:"all",children:"All PSPs"}),J?.psp_breakdown?.map((e,s)=>t.jsx(F,{value:e.psp,children:e.psp},s))]})]})]})]})]})}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Key Metrics"}),t.jsx("p",{className:"text-gray-600",children:"Revenue overview and key performance indicators"})]}),t.jsxs(CardGrid,{cols:4,gap:"lg",children:[t.jsx(L,{children:t.jsx(A,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:Q("common.total_revenue")}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:De(J?.total_revenue||0)}),t.jsxs("div",{className:"flex items-center mt-2",children:[t.jsx(h,{className:"h-4 w-4 text-green-500 mr-1"}),t.jsx("span",{className:"text-sm text-green-600",children:J?.growth_rate?(J.growth_rate>0?"+":"")+J.growth_rate.toFixed(1)+"%":"0.0%"})]})]}),t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx(j,{className:"h-6 w-6 text-blue-600"})})]})})}),t.jsx(L,{children:t.jsx(A,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:Q("common.total_transactions")}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Le(J.total_transactions)}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"All time"})]}),t.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx(c,{className:"h-6 w-6 text-green-600"})})]})})}),t.jsx(L,{children:t.jsx(A,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:Q("common.total_deposits")}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:De(J?.total_deposits||0)}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:J?.total_deposits&&J?.total_revenue?(J.total_deposits/J.total_revenue*100).toFixed(1)+"% of total":"0.0% of total"})]}),t.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center",children:t.jsx(i,{className:"h-6 w-6 text-emerald-600"})})]})})}),t.jsx(L,{children:t.jsx(A,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:Q("common.average_daily")}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:De(J.average_daily_revenue)}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Revenue per day"})]}),t.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:t.jsx(p,{className:"h-6 w-6 text-purple-600"})})]})})})]})]}),t.jsxs(O,{value:ie,onValueChange:ne,className:"w-full",children:[t.jsxs(E,{className:"grid w-full grid-cols-4 bg-gray-50/80 border border-gray-200/60 rounded-lg shadow-sm",children:[t.jsxs(R,{value:"overview",className:"flex items-center gap-2",children:[t.jsx(u,{className:"h-4 w-4"}),Q("tabs.overview")]}),t.jsxs(R,{value:"trends",className:"flex items-center gap-2",children:[t.jsx(f,{className:"h-4 w-4"}),Q("tabs.trends")]}),t.jsxs(R,{value:"clients",className:"flex items-center gap-2",children:[t.jsx(y,{className:"h-4 w-4"}),Q("navigation.clients")]}),t.jsxs(R,{value:"breakdown",className:"flex items-center gap-2",children:[t.jsx(g,{className:"h-4 w-4"}),Q("tabs.breakdown")]})]}),t.jsxs(B,{value:"overview",className:"mt-6",children:[t.jsxs(L,{children:[t.jsxs(T,{children:[t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(u,{className:"h-5 w-5"}),"Revenue Trends"]}),t.jsx(P,{children:"Daily revenue performance over time (Bar Chart)"})]}),t.jsx(A,{children:t.jsx("div",{className:"h-80",children:t.jsx(U,{width:"100%",height:"100%",children:t.jsxs($,{data:J?.daily_revenue||[],margin:{top:20,right:30,left:20,bottom:20},children:[t.jsxs("defs",{children:[t.jsxs("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:"#3B82F6",stopOpacity:1}),t.jsx("stop",{offset:"25%",stopColor:"#60A5FA",stopOpacity:.95}),t.jsx("stop",{offset:"50%",stopColor:"#93C5FD",stopOpacity:.9}),t.jsx("stop",{offset:"75%",stopColor:"#BFDBFE",stopOpacity:.85}),t.jsx("stop",{offset:"100%",stopColor:"#E0F2FE",stopOpacity:.8})]}),t.jsx("filter",{id:"revenueBarShadow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:t.jsx("feDropShadow",{dx:"0",dy:"4",stdDeviation:"6",floodColor:"#3B82F6",floodOpacity:"0.15"})})]}),t.jsx(z,{strokeDasharray:"1 3",stroke:"#f1f5f9",strokeWidth:1,vertical:!1,opacity:.8}),t.jsx(K,{dataKey:"date",stroke:"#475569",fontSize:12,fontWeight:600,tickLine:!1,axisLine:{stroke:"#e2e8f0",strokeWidth:1},tick:{fill:"#475569"},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),interval:"preserveStartEnd"}),t.jsx(I,{stroke:"#475569",fontSize:12,fontWeight:600,tickLine:!1,axisLine:{stroke:"#e2e8f0",strokeWidth:1},tick:{fill:"#475569"},tickFormatter:e=>De(e,"₺"),width:80}),t.jsx(V,{content:({active:e,payload:s,label:a})=>{if(e&&s&&s.length){const e=s[0].payload,a=e.date,l=new Date(a+"T00:00:00");return t.jsx("div",{className:"bg-white border border-slate-200 rounded-lg shadow-2xl p-5 min-w-[220px] backdrop-blur-sm",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(p,{className:"h-4 w-4 text-slate-600"}),t.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:l.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),t.jsxs("div",{className:"border-t border-slate-100 pt-3 space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Net Cash:"}),t.jsx("span",{className:"font-bold text-base "+(e.amount>=0?"text-green-600":"text-red-600"),children:De(e.amount||0,"₺")})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Transactions:"}),t.jsx("span",{className:"text-sm font-semibold text-slate-800",children:e.transaction_count||0})]})]})]})})}return null},cursor:{fill:"rgba(59, 130, 246, 0.05)"}}),t.jsx(Y,{dataKey:"amount",fill:"url(#revenueGradient)",radius:[6,6,0,0],stroke:"none",filter:"url(#revenueBarShadow)",style:{filter:"drop-shadow(0 4px 8px rgba(59, 130, 246, 0.15))"}})]},"revenue-bar-chart")})})})]}),t.jsxs(L,{children:[t.jsxs(T,{children:[t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(y,{className:"h-5 w-5"}),"Top Clients by Revenue"]}),t.jsx(P,{children:"Clients with highest transaction volume"})]}),t.jsx(A,{children:t.jsx("div",{className:"space-y-4",children:J?.top_clients?.slice(0,10).map((e,s)=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:t.jsxs("span",{className:"text-sm font-medium text-blue-700",children:["#",s+1]})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:e.client_name}),t.jsxs("p",{className:"text-sm text-gray-500",children:[e.transaction_count," transactions"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"font-semibold text-gray-900",children:De(e.total_amount)}),t.jsx("p",{className:"text-sm text-gray-500",children:J?.total_revenue?(e.total_amount/J.total_revenue*100).toFixed(1)+"%":"0.0%"})]})]},s))})})]})]}),t.jsx(B,{value:"trends",className:"mt-6",children:t.jsxs(L,{children:[t.jsxs(T,{children:[t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(u,{className:"h-5 w-5"}),"Revenue Breakdown"]}),t.jsx(P,{children:"Daily breakdown of deposits, withdrawals, and net revenue"})]}),t.jsx(A,{children:t.jsx("div",{className:"h-80",children:t.jsx(U,{width:"100%",height:"100%",children:t.jsxs($,{data:J?.daily_revenue||[],margin:{top:20,right:30,left:20,bottom:20},children:[t.jsxs("defs",{children:[t.jsxs("linearGradient",{id:"depositsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:"#10B981",stopOpacity:1}),t.jsx("stop",{offset:"25%",stopColor:"#34D399",stopOpacity:.95}),t.jsx("stop",{offset:"50%",stopColor:"#6EE7B7",stopOpacity:.9}),t.jsx("stop",{offset:"75%",stopColor:"#A7F3D0",stopOpacity:.85}),t.jsx("stop",{offset:"100%",stopColor:"#D1FAE5",stopOpacity:.8})]}),t.jsxs("linearGradient",{id:"withdrawalsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:"#EF4444",stopOpacity:1}),t.jsx("stop",{offset:"25%",stopColor:"#F87171",stopOpacity:.95}),t.jsx("stop",{offset:"50%",stopColor:"#FCA5A5",stopOpacity:.9}),t.jsx("stop",{offset:"75%",stopColor:"#FECACA",stopOpacity:.85}),t.jsx("stop",{offset:"100%",stopColor:"#FEE2E2",stopOpacity:.8})]}),t.jsxs("linearGradient",{id:"netRevenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:"#3B82F6",stopOpacity:1}),t.jsx("stop",{offset:"25%",stopColor:"#60A5FA",stopOpacity:.95}),t.jsx("stop",{offset:"50%",stopColor:"#93C5FD",stopOpacity:.9}),t.jsx("stop",{offset:"75%",stopColor:"#BFDBFE",stopOpacity:.85}),t.jsx("stop",{offset:"100%",stopColor:"#E0F2FE",stopOpacity:.8})]}),t.jsx("filter",{id:"depositsShadow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:t.jsx("feDropShadow",{dx:"0",dy:"4",stdDeviation:"6",floodColor:"#10B981",floodOpacity:"0.15"})}),t.jsx("filter",{id:"withdrawalsShadow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:t.jsx("feDropShadow",{dx:"0",dy:"4",stdDeviation:"6",floodColor:"#EF4444",floodOpacity:"0.15"})})]}),t.jsx(z,{strokeDasharray:"1 3",stroke:"#f1f5f9",strokeWidth:1,vertical:!1,opacity:.8}),t.jsx(K,{dataKey:"date",stroke:"#475569",fontSize:12,fontWeight:600,tickLine:!1,axisLine:{stroke:"#e2e8f0",strokeWidth:1},tick:{fill:"#475569"},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),interval:"preserveStartEnd"}),t.jsx(I,{stroke:"#475569",fontSize:12,fontWeight:600,tickLine:!1,axisLine:{stroke:"#e2e8f0",strokeWidth:1},tick:{fill:"#475569"},tickFormatter:e=>De(e,"₺"),width:80}),t.jsx(V,{content:({active:e,payload:s,label:a})=>{if(e&&s&&s.length){const e=s[0].payload,a=e.date,l=new Date(a+"T00:00:00");return t.jsx("div",{className:"bg-white border border-slate-200 rounded-lg shadow-2xl p-5 min-w-[220px] backdrop-blur-sm",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(p,{className:"h-4 w-4 text-slate-600"}),t.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:l.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),t.jsxs("div",{className:"border-t border-slate-100 pt-3 space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Net Cash:"}),t.jsx("span",{className:"font-bold text-base "+(e.amount>=0?"text-green-600":"text-red-600"),children:De(e.amount||0,"₺")})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Transactions:"}),t.jsx("span",{className:"text-sm font-semibold text-slate-800",children:e.transaction_count||0})]})]})]})})}return null},cursor:{fill:"rgba(59, 130, 246, 0.05)"}}),t.jsx(Y,{dataKey:"deposits",fill:"url(#depositsGradient)",name:"Deposits",radius:[6,6,0,0],stroke:"none",filter:"url(#depositsShadow)",style:{filter:"drop-shadow(0 4px 8px rgba(16, 185, 129, 0.15))"}}),t.jsx(Y,{dataKey:"withdrawals",fill:"url(#withdrawalsGradient)",name:"Withdrawals",radius:[6,6,0,0],stroke:"none",filter:"url(#withdrawalsShadow)",style:{filter:"drop-shadow(0 4px 8px rgba(239, 68, 68, 0.15))"}})]})})})})]})}),t.jsx(B,{value:"clients",className:"mt-6",children:t.jsxs(L,{children:[t.jsxs(T,{children:[t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(y,{className:"h-5 w-5"}),"Client Performance Analysis"]}),t.jsx(P,{children:"Detailed client revenue and transaction analysis"})]}),t.jsx(A,{children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Revenue"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transactions"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Transaction"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Market Share"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J?.top_clients?.map((e,s)=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:t.jsxs("span",{className:"text-sm font-medium text-white",children:["#",s+1]})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.client_name})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:De(e.total_amount)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Le(e.transaction_count)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:De(e.total_amount/e.transaction_count)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:J?.total_revenue?(e.total_amount/J.total_revenue*100).toFixed(1)+"%":"0.0%"})]},s))})]})})})]})}),t.jsx(B,{value:"breakdown",className:"mt-6",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(L,{children:[t.jsxs(T,{children:[t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(v,{className:"h-5 w-5"}),"PSP Breakdown"]}),t.jsx(P,{children:"Revenue distribution by Payment Service Provider"})]}),t.jsx(A,{children:t.jsx("div",{className:"h-64",children:t.jsx(U,{width:"100%",height:"100%",children:t.jsxs(M,{children:[t.jsx(q,{data:J?.psp_breakdown?.map((e,s)=>({name:e.psp,value:e.total_amount,fill:Ae[s%Ae.length]})),cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:e,percent:s})=>`${e} ${(100*s).toFixed(0)}%`,children:J?.psp_breakdown?.map((e,s)=>t.jsx(H,{fill:Ae[s%Ae.length]},`cell-${s}`))}),t.jsx(V,{formatter:e=>[De(e,"₺"),"Revenue"]})]})})})})]}),t.jsxs(L,{children:[t.jsxs(T,{children:[t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(g,{className:"h-5 w-5"}),"Category Breakdown"]}),t.jsx(P,{children:"Revenue distribution by transaction category"})]}),t.jsx(A,{children:t.jsx("div",{className:"space-y-4",children:J?.category_breakdown?.map((e,s)=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(W,{variant:"WD"===e.category?"destructive":"default",children:e.category}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.category})]}),t.jsx("span",{className:"text-sm text-gray-500",children:De(e.total_amount)})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"h-2 rounded-full "+("WD"===e.category?"bg-gradient-to-r from-red-500 to-red-600":"bg-gradient-to-r from-green-500 to-green-600"),style:{width:`${e.percentage}%`}})}),t.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[t.jsxs("span",{children:[e.transaction_count," transactions"]}),t.jsx("span",{children:e?.percentage?e.percentage.toFixed(1)+"%":"0.0%"})]})]},s))})})]})]})})]})]}):t.jsx(ContentArea,{spacing:"xl",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(r,{className:"h-8 w-8 text-yellow-600"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Data Available"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"No analytics data available for the selected time range"}),t.jsxs(b,{onClick:Ce,variant:"outline",children:[t.jsx(a,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})})}export{Q as default};
