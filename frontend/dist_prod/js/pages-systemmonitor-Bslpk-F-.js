import{r as e,j as s,f as t,$ as a,a0 as l,o as r,e as i,ab as n,T as c,bg as d,aR as o,p as m,bh as x,k as g,b4 as h,b as p,C as u}from"./vendor-react-BhTnfaj4.js";import{a as j}from"./contexts-BJ30luUC.js";import"./components-modern-tUvpuNx5.js";import"./components-ui-DqTPGewb.js";import"./vendor-utils-CtF19A-_.js";import"./components-trust-Cyz_q_DS.js";import"./vendor-charts-recharts-B9ou1qfH.js";import"./vendor-i18n-DHLiip7K.js";const b=()=>{j();const[b,y]=e.useState(null),[N,f]=e.useState([]),[w,v]=e.useState(null),[_,k]=e.useState(!0),[S,z]=e.useState(!0),[C,D]=e.useState(30),[A,O]=e.useState(!1),[R,U]=e.useState(null),[$,F]=e.useState(!1),[M,L]=e.useState([]),[P,I]=e.useState(null);e.useEffect(()=>{if(T(),S){const e=setInterval(T,1e3*C);return()=>clearInterval(e)}return()=>{}},[S,C]);const T=async()=>{try{k(!0);const e=await fetch("/api/v1/performance/status");if(e.ok){const s=await e.json();I(s);const t={cpu_usage:"number"!=typeof s.system?.cpu_percent||isNaN(s.system.cpu_percent)?0:s.system.cpu_percent,memory_usage:"number"!=typeof s.system?.memory_percent||isNaN(s.system.memory_percent)?0:s.system.memory_percent,disk_usage:"number"!=typeof s.system?.disk_percent||isNaN(s.system.disk_percent)?0:s.system.disk_percent,database_connections:"number"!=typeof s.database_pool?.checked_out||isNaN(s.database_pool.checked_out)?0:s.database_pool.checked_out,cache_hit_rate:"number"!=typeof s.cache?.hit_rate||isNaN(s.cache.hit_rate)?s.cache?.hits&&s.cache?.misses?s.cache.hits/(s.cache.hits+s.cache.misses)*100:0:s.cache.hit_rate,response_time:"number"!=typeof s.cache?.avg_response_time||isNaN(s.cache.avg_response_time)?0:s.cache.avg_response_time,requests_per_second:"number"!=typeof s.cache?.requests_per_second||isNaN(s.cache.requests_per_second)?0:s.cache.requests_per_second,error_rate:"number"!=typeof s.cache?.error_rate||isNaN(s.cache.error_rate)?0:s.cache.error_rate,uptime:"number"==typeof s.timestamp?Math.floor(Date.now()/1e3-s.timestamp):0,last_update:s.timestamp?new Date(1e3*s.timestamp).toISOString():(new Date).toISOString(),system:s.system,cache:s.cache,database_pool:s.database_pool,database:s.database};y(t)}const s=await fetch("/api/v1/performance/system-status");if(s.ok){const e=await s.json(),t={overall:e.overall||"unknown",database:e.database||"unknown",cache:e.cache||"unknown",api:e.api||"unknown",background_tasks:e.background_tasks||"unknown"};v(t)}const t=await fetch("/api/v1/performance/alerts");if(t.ok){const e=await t.json(),s=Array.isArray(e)?e:e.alerts||[];f(s)}}catch(e){}finally{k(!1)}},q=async()=>{try{F(!0);const e={timestamp:(new Date).toISOString(),status:"running",message:"Database optimization in progress..."};L(s=>[e,...s.slice(0,9)]);const s=await fetch("/api/v1/performance/database-optimization");if(!s.ok)throw new Error("Failed to run optimization");{const e=await s.json();U(e),L(s=>[{timestamp:(new Date).toISOString(),status:"success",message:`Optimization completed successfully! Found ${e.total} recommendations.`,details:e},...s.slice(0,9)]);const t=e.recommendations.map(e=>({id:`db_opt_${Date.now()}_${Math.random()}`,type:e.type,message:e.message,timestamp:(new Date).toISOString(),severity:e.priority,resolved:!1,recommendations:e.details?.general_tips||[],details:e.details}));f(e=>[...e,...t])}}catch(e){L(s=>[{timestamp:(new Date).toISOString(),status:"error",message:"Database optimization failed. Please check the logs.",details:{error:e instanceof Error?e.message:"Unknown error"}},...s.slice(0,9)])}finally{F(!1)}},B=e=>{if(!e)return"text-gray-600 bg-gray-100";switch(e.toLowerCase()){case"healthy":return"text-green-600 bg-green-100";case"warning":return"text-yellow-600 bg-yellow-100";case"error":return"text-red-600 bg-red-100";case"critical":return"text-red-800 bg-red-200";default:return"text-gray-600 bg-gray-100"}},E=e=>{if(!e)return"border-l-gray-500 bg-gray-50";switch(e.toLowerCase()){case"low":default:return"border-l-gray-500 bg-gray-50";case"medium":return"border-l-yellow-500 bg-yellow-50";case"high":return"border-l-orange-500 bg-orange-50";case"critical":return"border-l-red-500 bg-red-50"}};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx(t,{className:"h-8 w-8 text-gray-600"}),"System Monitor"]}),s.jsx("p",{className:"text-gray-600",children:"Real-time system performance and health monitoring"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:async()=>{try{const e={timestamp:(new Date).toISOString(),system_status:w,metrics:P||b,alerts:N,database_optimization:R,optimization_history:M},s=JSON.stringify(e,null,2);await navigator.clipboard.writeText(s),O(!0),setTimeout(()=>O(!1),2e3)}catch(e){}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center gap-2",title:"Copy all system diagnostics to clipboard",children:A?s.jsxs(s.Fragment,{children:[s.jsx(a,{className:"w-4 h-4"}),"Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(l,{className:"w-4 h-4"}),"Copy Diagnostics"]})}),s.jsxs("button",{onClick:T,disabled:_,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(r,{className:"w-4 h-4 "+(_?"animate-spin":"")}),_?"Refreshing...":"Refresh Now"]}),s.jsxs("button",{onClick:q,disabled:$,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 flex items-center gap-2",children:[s.jsx(i,{className:"w-4 h-4"}),$?"Optimizing...":"Run DB Optimization"]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx("input",{type:"checkbox",checked:S,onChange:e=>z(e.target.checked),className:"rounded border-gray-300 text-gray-600 focus:ring-gray-500"}),"Auto-refresh"]}),S&&s.jsxs("select",{value:C,onChange:e=>D(Number(e.target.value)),className:"text-sm border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-gray-500",children:[s.jsx("option",{value:15,children:"15 seconds"}),s.jsx("option",{value:30,children:"30 seconds"}),s.jsx("option",{value:60,children:"1 minute"}),s.jsx("option",{value:300,children:"5 minutes"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"text-gray-500",children:["Last updated: ",b?.last_update||"Never"]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(n,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-500",children:"DB Status:"}),R?$?s.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),"Optimizing..."]}):s.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:["Optimized (",R.total," recommendations)"]}):s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:"Not Analyzed"})]}),R&&s.jsxs("div",{className:"text-xs text-gray-400",children:["Last run: ",new Date(R.timestamp).toLocaleTimeString()]})]})]})]}),_&&s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Loading system data..."})]}),!_&&!b&&!w&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[s.jsx(c,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Failed to load system data"}),s.jsx("p",{className:"text-red-600 mb-4",children:"Unable to fetch system metrics and status information."}),s.jsx("button",{onClick:T,className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Retry"})]}),!_&&w&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overall Status"}),s.jsx("p",{className:`text-lg font-semibold ${B(w.overall)} px-2 py-1 rounded-full inline-block mt-1`,children:(w.overall||"unknown").charAt(0).toUpperCase()+(w.overall||"unknown").slice(1)})]}),(e=>{if(!e)return s.jsx(u,{className:"w-5 h-5 text-gray-600"});switch(e.toLowerCase()){case"healthy":return s.jsx(p,{className:"w-5 h-5 text-green-600"});case"warning":return s.jsx(c,{className:"w-5 h-5 text-yellow-600"});case"error":return s.jsx(c,{className:"w-5 h-5 text-red-600"});case"critical":return s.jsx(c,{className:"w-5 h-5 text-red-800"});default:return s.jsx(u,{className:"w-5 h-5 text-gray-600"})}})(w.overall)]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Database"}),s.jsx("p",{className:`text-lg font-semibold ${B(w.database)} px-2 py-1 rounded-full inline-block mt-1`,children:(w.database||"unknown").charAt(0).toUpperCase()+(w.database||"unknown").slice(1)})]}),s.jsx(n,{className:"w-6 h-6 text-gray-600"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"DB Optimization"}),s.jsx("div",{className:"mt-1",children:R?$?s.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),"Running"]}):s.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:[R.total," Recommendations"]}):s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:"Not Analyzed"})})]}),s.jsx(i,{className:"w-6 h-6 text-green-600"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Cache"}),s.jsx("p",{className:`text-lg font-semibold ${B(w.cache)} px-2 py-1 rounded-full inline-block mt-1`,children:(w.cache||"unknown").charAt(0).toUpperCase()+(w.cache||"unknown").slice(1)})]}),s.jsx(d,{className:"w-6 h-6 text-green-600"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"API"}),s.jsx("p",{className:`text-lg font-semibold ${B(w.api)} px-2 py-1 rounded-full inline-block mt-1`,children:(w.api||"unknown").charAt(0).toUpperCase()+(w.api||"unknown").slice(1)})]}),s.jsx(o,{className:"w-6 h-6 text-purple-600"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Background Tasks"}),s.jsx("p",{className:`text-lg font-semibold ${B(w.background_tasks)} px-2 py-1 rounded-full inline-block mt-1`,children:(w.background_tasks||"unknown").charAt(0).toUpperCase()+(w.background_tasks||"unknown").slice(1)})]}),s.jsx(m,{className:"w-6 h-6 text-indigo-600"})]})})]}),!_&&b&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(x,{className:"w-5 h-5 text-gray-600"}),"System Resources"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"CPU Usage"}),s.jsxs("span",{className:"font-medium",children:[(b.cpu_usage??0).toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full "+((b.cpu_usage??0)>80?"bg-red-500":(b.cpu_usage??0)>60?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(b.cpu_usage??0,100)}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Memory Usage"}),s.jsxs("span",{className:"font-medium",children:[(b.memory_usage??0).toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full "+((b.memory_usage??0)>80?"bg-red-500":(b.memory_usage??0)>60?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(b.memory_usage??0,100)}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Disk Usage"}),s.jsxs("span",{className:"font-medium",children:[(b.disk_usage??0).toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full "+((b.disk_usage??0)>80?"bg-red-500":(b.disk_usage??0)>60?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(b.disk_usage??0,100)}%`}})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(g,{className:"w-5 h-5 text-green-600"}),"Application Performance"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[s.jsxs("p",{className:"text-2xl font-bold text-gray-600",children:[(b.response_time??0).toFixed(2),"ms"]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Response Time"})]}),s.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-green-600",children:(b.requests_per_second??0).toFixed(1)}),s.jsx("p",{className:"text-sm text-gray-600",children:"Requests/sec"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:b.database_connections??0}),s.jsx("p",{className:"text-sm text-gray-600",children:"DB Connections"})]}),s.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[s.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[(b.cache_hit_rate??0).toFixed(1),"%"]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Cache Hit Rate"})]})]}),s.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[s.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[(b.error_rate??0).toFixed(2),"%"]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Error Rate"})]})]})]})]}),!_&&b&&(b.cache||b.database_pool)&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[b.cache&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(h,{className:"w-5 h-5 text-yellow-600"}),"Redis Cache",s.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded-full "+(b.cache.redis_available?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:b.cache.redis_available?"Available":"Memory Cache"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Hit Rate"}),s.jsxs("span",{className:"font-medium",children:[(b.cache.hit_rate??0).toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full "+((b.cache.hit_rate??0)>70?"bg-green-500":(b.cache.hit_rate??0)>50?"bg-yellow-500":"bg-red-500"),style:{width:`${Math.min(b.cache.hit_rate??0,100)}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-green-600",children:b.cache.hits??0}),s.jsx("p",{className:"text-sm text-gray-600",children:"Cache Hits"})]}),s.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-red-600",children:b.cache.misses??0}),s.jsx("p",{className:"text-sm text-gray-600",children:"Cache Misses"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[(b.cache.avg_response_time??0).toFixed(2),"ms"]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Avg Response"})]}),s.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:b.cache.memory_cache_entries??0}),s.jsx("p",{className:"text-sm text-gray-600",children:"Memory Entries"})]})]}),!b.cache.redis_available&&s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx(c,{className:"w-4 h-4 inline mr-2"}),"Redis is not available. Using in-memory cache (not persistent across restarts)."]})})]})]}),b.database_pool&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(n,{className:"w-5 h-5 text-blue-600"}),"Database Connection Pool"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Pool Usage"}),s.jsxs("span",{className:"font-medium",children:[b.database_pool.checked_out??0," / ",b.database_pool.size??0,b.database_pool.size>0&&` (${(b.database_pool.checked_out/b.database_pool.size*100).toFixed(1)}%)`]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full "+(b.database_pool.size>0&&b.database_pool.checked_out/b.database_pool.size*100>80?"bg-red-500":b.database_pool.size>0&&b.database_pool.checked_out/b.database_pool.size*100>60?"bg-yellow-500":"bg-green-500"),style:{width:`${b.database_pool.size>0?Math.min(b.database_pool.checked_out/b.database_pool.size*100,100):0}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:b.database_pool.checked_out??0}),s.jsx("p",{className:"text-sm text-gray-600",children:"Active Connections"})]}),s.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:b.database_pool.size??0}),s.jsx("p",{className:"text-sm text-gray-600",children:"Pool Size"})]})]}),s.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:b.database_pool.overflow??0}),s.jsx("p",{className:"text-sm text-gray-600",children:"Overflow Connections"}),b.database_pool.overflow>0&&s.jsxs("p",{className:"text-xs text-orange-700 mt-1",children:[s.jsx(c,{className:"w-3 h-3 inline mr-1"}),"Pool exhausted, using overflow connections"]})]}),b.database_pool.size>0&&b.database_pool.checked_out/b.database_pool.size*100>80&&s.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-red-800",children:[s.jsx(c,{className:"w-4 h-4 inline mr-2"}),"High pool usage detected. Consider increasing pool size or optimizing connection usage."]})})]})]})]}),!_&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(n,{className:"w-5 h-5 text-green-600"}),"Database Optimization"]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("button",{onClick:q,disabled:$,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(i,{className:"w-4 h-4"}),$?"Optimizing...":"Run Optimization"]})})]}),R?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(p,{className:"w-5 h-5 text-gray-600"}),s.jsx("span",{className:"font-medium text-gray-800",children:"Optimization Analysis Complete"})]}),s.jsxs("p",{className:"text-sm text-gray-700",children:["Found ",R.total," optimization opportunities. Last run: ",new Date(R.timestamp).toLocaleString()]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.recommendations.map((e,t)=>s.jsx("div",{className:"border rounded-lg p-4 "+("warning"===e.type?"border-yellow-200 bg-yellow-50":"error"===e.type?"border-red-200 bg-red-50":"success"===e.type?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50"),children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-2 h-2 rounded-full mt-2 "+("warning"===e.type?"bg-yellow-500":"error"===e.type?"bg-red-500":"success"===e.type?"bg-green-500":"bg-gray-500")}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:e.message}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.action}),e.details?.table&&s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[s.jsx("span",{className:"font-medium",children:"Table:"})," ",e.details.table,e.details.row_count&&s.jsxs("span",{className:"ml-2",children:["(",e.details.row_count.toLocaleString()," rows)"]})]}),e.details?.suggestions&&e.details.suggestions.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Suggestions:"}),s.jsx("ul",{className:"text-xs text-gray-600 space-y-1",children:e.details.suggestions.map((e,t)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-gray-500 mt-1",children:"•"}),e]},t))})]}),e.details?.general_tips&&e.details.general_tips.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Best Practices:"}),s.jsx("ul",{className:"text-xs text-gray-600 space-y-1",children:e.details.general_tips.map((e,t)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-green-500 mt-1",children:"•"}),e]},t))})]})]})]})},t))})]}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(n,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),s.jsx("p",{className:"text-lg font-medium mb-2",children:"No optimization data yet"}),s.jsx("p",{className:"text-sm",children:'Click "Run Optimization" to analyze your database performance'})]})]}),!_&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(c,{className:"w-5 h-5 text-orange-600"}),"Performance Alerts"]}),0===N.length?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(p,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),s.jsx("p",{children:"No active alerts. System is running smoothly!"})]}):s.jsx("div",{className:"space-y-3",children:N.map(e=>s.jsx("div",{className:`p-4 rounded-lg border-l-4 ${E(e.severity)}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("critical"===(e.severity||"low")?"bg-red-100 text-red-800":"high"===(e.severity||"low")?"bg-orange-100 text-orange-800":"medium"===(e.severity||"low")?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:(e.severity||"low").toUpperCase()}),s.jsx("span",{className:"text-sm text-gray-500",children:e.timestamp||"Unknown"})]}),s.jsx("p",{className:"text-gray-900 font-medium mb-2",children:e.message||"No message"}),e.recommendations&&Array.isArray(e.recommendations)&&s.jsxs("div",{className:"mt-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recommendations:"}),s.jsx("ul",{className:"space-y-1",children:e.recommendations.map((e,t)=>s.jsxs("li",{className:"text-sm text-gray-600 flex items-start gap-2",children:[s.jsx("span",{className:"text-gray-500 mt-1",children:"•"}),s.jsx("span",{children:e})]},t))})]}),e.details&&s.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Details:"}),e.details.table&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Table: ",s.jsx("span",{className:"font-medium",children:e.details.table})]}),e.details.row_count&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Rows: ",s.jsx("span",{className:"font-medium",children:e.details.row_count.toLocaleString()})]}),e.details.suggestions&&Array.isArray(e.details.suggestions)&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Specific Actions:"}),s.jsx("ul",{className:"space-y-1",children:e.details.suggestions.map((e,t)=>s.jsxs("li",{className:"text-sm text-gray-600 flex items-start gap-2",children:[s.jsx("span",{className:"text-green-500 mt-1",children:"→"}),s.jsx("span",{children:e})]},t))})]})]})]}),s.jsx("button",{onClick:()=>{f(N.filter(s=>s.id!==e.id))},className:"text-gray-400 hover:text-gray-600 ml-4",title:"Dismiss alert",children:"×"})]})},e.id))})]}),!_&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mt-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(i,{className:"w-5 h-5 text-purple-600"}),"Database Optimization History"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Message"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map((e,t)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.timestamp).toLocaleString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("success"===e.status?"bg-green-100 text-green-800":"error"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status.toUpperCase()})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.message}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.details&&s.jsx("button",{onClick:()=>{L(M.map((e,s)=>s===t?{...e,details:null}:e))},className:"text-gray-600 hover:underline text-xs",children:"View Details"})})]},t))})]})})]}),!_&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(o,{className:"w-5 h-5 text-gray-600"}),"System Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Uptime"}),s.jsx("p",{className:"font-medium",children:b?.uptime?`${Math.floor(b.uptime/3600)}h ${Math.floor(b.uptime%3600/60)}m`:"Unknown"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Last Update"}),s.jsx("p",{className:"font-medium",children:b?.last_update||"Never"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Environment"}),s.jsx("p",{className:"font-medium",children:"Production"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Version"}),s.jsx("p",{className:"font-medium",children:"PipLinePro v2.0"})]})]})]})]})})};export{b as default};
